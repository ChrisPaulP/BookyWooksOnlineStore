2024-05-29 10:16:26.089 +00:00 [WRN] No store type was specified for the decimal property 'OrderTotal' on entity type 'OrderStateInstance'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-05-29 10:16:28.213 +00:00 [WRN] No store type was specified for the decimal property 'OrderTotal' on entity type 'OrderStateInstance'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-05-29 10:16:28.874 +00:00 [INF] Executed DbCommand (488ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [StateMachineDb];
2024-05-29 10:16:29.083 +00:00 [INF] Executed DbCommand (198ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [StateMachineDb] SET READ_COMMITTED_SNAPSHOT ON;
END;
2024-05-29 10:16:29.157 +00:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-05-29 10:16:29.275 +00:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2024-05-29 10:16:29.284 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-05-29 10:16:29.313 +00:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-05-29 10:16:29.339 +00:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-05-29 10:16:29.364 +00:00 [INF] Applying migration '20240517112515_InitialMigration'.
2024-05-29 10:16:29.448 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [InboxState] (
    [Id] bigint NOT NULL IDENTITY,
    [MessageId] uniqueidentifier NOT NULL,
    [ConsumerId] uniqueidentifier NOT NULL,
    [LockId] uniqueidentifier NOT NULL,
    [RowVersion] rowversion NULL,
    [Received] datetime2 NOT NULL,
    [ReceiveCount] int NOT NULL,
    [ExpirationTime] datetime2 NULL,
    [Consumed] datetime2 NULL,
    [Delivered] datetime2 NULL,
    [LastSequenceNumber] bigint NULL,
    CONSTRAINT [PK_InboxState] PRIMARY KEY ([Id]),
    CONSTRAINT [AK_InboxState_MessageId_ConsumerId] UNIQUE ([MessageId], [ConsumerId])
);
2024-05-29 10:16:29.460 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [OrderStateInstance] (
    [CorrelationId] uniqueidentifier NOT NULL,
    [CurrentState] nvarchar(max) NOT NULL,
    [OrderId] uniqueidentifier NOT NULL,
    [CustomerId] uniqueidentifier NOT NULL,
    [OrderTotal] decimal(18,2) NOT NULL,
    [CreatedDate] datetime2 NOT NULL,
    CONSTRAINT [PK_OrderStateInstance] PRIMARY KEY ([CorrelationId])
);
2024-05-29 10:16:29.502 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [OutboxMessage] (
    [SequenceNumber] bigint NOT NULL IDENTITY,
    [EnqueueTime] datetime2 NULL,
    [SentTime] datetime2 NOT NULL,
    [Headers] nvarchar(max) NULL,
    [Properties] nvarchar(max) NULL,
    [InboxMessageId] uniqueidentifier NULL,
    [InboxConsumerId] uniqueidentifier NULL,
    [OutboxId] uniqueidentifier NULL,
    [MessageId] uniqueidentifier NOT NULL,
    [ContentType] nvarchar(256) NOT NULL,
    [MessageType] nvarchar(max) NOT NULL,
    [Body] nvarchar(max) NOT NULL,
    [ConversationId] uniqueidentifier NULL,
    [CorrelationId] uniqueidentifier NULL,
    [InitiatorId] uniqueidentifier NULL,
    [RequestId] uniqueidentifier NULL,
    [SourceAddress] nvarchar(256) NULL,
    [DestinationAddress] nvarchar(256) NULL,
    [ResponseAddress] nvarchar(256) NULL,
    [FaultAddress] nvarchar(256) NULL,
    [ExpirationTime] datetime2 NULL,
    CONSTRAINT [PK_OutboxMessage] PRIMARY KEY ([SequenceNumber])
);
2024-05-29 10:16:29.513 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [OutboxState] (
    [OutboxId] uniqueidentifier NOT NULL,
    [LockId] uniqueidentifier NOT NULL,
    [RowVersion] rowversion NULL,
    [Created] datetime2 NOT NULL,
    [Delivered] datetime2 NULL,
    [LastSequenceNumber] bigint NULL,
    CONSTRAINT [PK_OutboxState] PRIMARY KEY ([OutboxId])
);
2024-05-29 10:16:29.551 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_InboxState_Delivered] ON [InboxState] ([Delivered]);
2024-05-29 10:16:29.584 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_OutboxMessage_EnqueueTime] ON [OutboxMessage] ([EnqueueTime]);
2024-05-29 10:16:29.604 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_OutboxMessage_ExpirationTime] ON [OutboxMessage] ([ExpirationTime]);
2024-05-29 10:16:29.635 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_OutboxMessage_InboxMessageId_InboxConsumerId_SequenceNumber] ON [OutboxMessage] ([InboxMessageId], [InboxConsumerId], [SequenceNumber]) WHERE [InboxMessageId] IS NOT NULL AND [InboxConsumerId] IS NOT NULL;
2024-05-29 10:16:29.668 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_OutboxMessage_OutboxId_SequenceNumber] ON [OutboxMessage] ([OutboxId], [SequenceNumber]) WHERE [OutboxId] IS NOT NULL;
2024-05-29 10:16:29.677 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_OutboxState_Created] ON [OutboxState] ([Created]);
2024-05-29 10:16:29.715 +00:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20240517112515_InitialMigration', N'8.0.4');
2024-05-29 10:16:30.475 +00:00 [INF] Configured endpoint create-order-message-queue, Saga: SagaOrchestration.StateInstances.OrderStateInstance, State Machine: SagaOrchestration.StateMachines.OrderStateMachine
2024-05-29 10:16:38.708 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-29 10:16:38.717 +00:00 [INF] Hosting environment: Development
2024-05-29 10:16:38.737 +00:00 [INF] Content root path: /app
2024-05-29 10:16:39.364 +00:00 [INF] Bus started: "rabbitmq://rabbitmq/"
2024-05-29 10:16:50.446 +00:00 [INF] Executed DbCommand (498ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:17:00.674 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:17:10.706 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:17:20.713 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:17:30.751 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:17:40.781 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:17:50.823 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:18:00.844 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:18:10.858 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:18:20.910 +00:00 [INF] Executed DbCommand (48ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:18:30.986 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:18:41.076 +00:00 [INF] Executed DbCommand (45ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:18:51.103 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:19:01.136 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:19:11.166 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:19:21.201 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:19:31.214 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:19:41.242 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:21:23.379 +00:00 [WRN] No store type was specified for the decimal property 'OrderTotal' on entity type 'OrderStateInstance'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-05-29 10:21:24.739 +00:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-05-29 10:21:24.786 +00:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-05-29 10:21:24.815 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-05-29 10:21:24.843 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-05-29 10:21:24.884 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-05-29 10:21:24.905 +00:00 [INF] No migrations were applied. The database is already up to date.
2024-05-29 10:21:25.466 +00:00 [INF] Configured endpoint create-order-message-queue, Saga: SagaOrchestration.StateInstances.OrderStateInstance, State Machine: SagaOrchestration.StateMachines.OrderStateMachine
2024-05-29 10:21:29.071 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-29 10:21:29.074 +00:00 [INF] Hosting environment: Development
2024-05-29 10:21:29.076 +00:00 [INF] Content root path: /app
2024-05-29 10:21:29.336 +00:00 [INF] Bus started: "rabbitmq://rabbitmq/"
2024-05-29 10:21:39.648 +00:00 [INF] Executed DbCommand (88ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:21:49.832 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:21:59.850 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:22:09.861 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:22:19.870 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:22:29.927 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:22:33.448 +00:00 [INF] Executed DbCommand (15ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 10:22:33.925 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:22:33.946 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int64), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = Int32), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InboxState] ([Consumed], [ConsumerId], [Delivered], [ExpirationTime], [LastSequenceNumber], [LockId], [MessageId], [ReceiveCount], [Received])
OUTPUT INSERTED.[Id], INSERTED.[RowVersion]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2024-05-29 10:22:34.184 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 10:22:34.217 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:22:34.264 +00:00 [INF] Executed DbCommand (18ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 10:22:34.494 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[CorrelationId], [o].[CreatedDate], [o].[CurrentState], [o].[CustomerId], [o].[OrderId], [o].[OrderTotal]
FROM [OrderStateInstance] AS [o]
WHERE [o].[OrderId] = '9f80b71e-fbde-45a4-b049-29b255ad2a54'
2024-05-29 10:22:34.627 +00:00 [INF] CreateOrderMessage received in OrderStateMachine: CorrelationId: 3bb58dfc-74c1-41ac-99fe-e809db9c5504
CurrentState: Initial
OrderId: 00000000-0000-0000-0000-000000000000
CustomerId: 00000000-0000-0000-0000-000000000000
OrderTotal: 0
CreatedDate: 01/01/0001 00:00:00
------------------------ 
2024-05-29 10:22:35.030 +00:00 [INF] CheckBookStockCommand published in OrderStateMachine: CorrelationId: 3bb58dfc-74c1-41ac-99fe-e809db9c5504
CurrentState: StockCheck
OrderId: 9f80b71e-fbde-45a4-b049-29b255ad2a54
CustomerId: 22e985e1-40a5-495b-9282-897853dd5d61
OrderTotal: 42.48
CreatedDate: 05/29/2024 10:22:34
------------------------ 
2024-05-29 10:22:35.128 +00:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderStateInstance] ([CorrelationId], [CreatedDate], [CurrentState], [CustomerId], [OrderId], [OrderTotal])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2024-05-29 10:22:35.177 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:22:35.233 +00:00 [INF] Executed DbCommand (9ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary), @p9='?' (Size = 4000), @p10='?' (Size = 256), @p11='?' (DbType = Guid), @p12='?' (DbType = Guid), @p13='?' (Size = 256), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (Size = 256), @p17='?' (Size = 4000), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = Guid), @p22='?' (Size = 4000), @p23='?' (DbType = Guid), @p24='?' (Size = 4000), @p25='?' (DbType = Guid), @p26='?' (Size = 256), @p27='?' (DbType = DateTime2), @p28='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
INSERT INTO [OutboxMessage] ([Body], [ContentType], [ConversationId], [CorrelationId], [DestinationAddress], [EnqueueTime], [ExpirationTime], [FaultAddress], [Headers], [InboxConsumerId], [InboxMessageId], [InitiatorId], [MessageId], [MessageType], [OutboxId], [Properties], [RequestId], [ResponseAddress], [SentTime], [SourceAddress])
OUTPUT INSERTED.[SequenceNumber]
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
2024-05-29 10:22:35.264 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 10:22:35.271 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:22:35.320 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 10:22:35.413 +00:00 [INF] Executed DbCommand (41ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2024-05-29 10:22:35.537 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:22:35.545 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 10:22:35.629 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 10:22:35.635 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:22:35.662 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 10:22:35.695 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2024-05-29 10:22:35.704 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:22:35.715 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 10:22:35.782 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 10:22:35.791 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:22:35.822 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 10:22:35.853 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[@__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1
2024-05-29 10:22:35.902 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:22:35.950 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[@p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [OutboxMessage]
OUTPUT 1
WHERE [SequenceNumber] = @p0;
2024-05-29 10:22:37.230 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 10:22:37.242 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:22:37.270 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int64), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = Int32), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InboxState] ([Consumed], [ConsumerId], [Delivered], [ExpirationTime], [LastSequenceNumber], [LockId], [MessageId], [ReceiveCount], [Received])
OUTPUT INSERTED.[Id], INSERTED.[RowVersion]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2024-05-29 10:22:37.351 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 10:22:37.356 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:22:37.377 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 10:22:37.472 +00:00 [INF] Executed DbCommand (28ms) [Parameters=[@__id='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[CorrelationId], [o].[CreatedDate], [o].[CurrentState], [o].[CustomerId], [o].[OrderId], [o].[OrderTotal]
FROM [OrderStateInstance] AS [o]
WHERE [o].[CorrelationId] = @__id
2024-05-29 10:22:37.498 +00:00 [INF] StockReservationFailedEvent received in OrderStateMachine: CorrelationId: 3bb58dfc-74c1-41ac-99fe-e809db9c5504
CurrentState: StockCheck
OrderId: 9f80b71e-fbde-45a4-b049-29b255ad2a54
CustomerId: 22e985e1-40a5-495b-9282-897853dd5d61
OrderTotal: 42.48
CreatedDate: 05/29/2024 10:22:34
------------------------ 
2024-05-29 10:22:37.672 +00:00 [INF] Executed DbCommand (46ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [OrderStateInstance] SET [CurrentState] = @p0
OUTPUT 1
WHERE [CorrelationId] = @p1;
2024-05-29 10:22:37.683 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:22:37.713 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary), @p9='?' (Size = 4000), @p10='?' (Size = 256), @p11='?' (DbType = Guid), @p12='?' (DbType = Guid), @p13='?' (Size = 256), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (Size = 256), @p17='?' (Size = 4000), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = Guid), @p22='?' (Size = 4000), @p23='?' (DbType = Guid), @p24='?' (Size = 4000), @p25='?' (DbType = Guid), @p26='?' (Size = 256), @p27='?' (DbType = DateTime2), @p28='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
INSERT INTO [OutboxMessage] ([Body], [ContentType], [ConversationId], [CorrelationId], [DestinationAddress], [EnqueueTime], [ExpirationTime], [FaultAddress], [Headers], [InboxConsumerId], [InboxMessageId], [InitiatorId], [MessageId], [MessageType], [OutboxId], [Properties], [RequestId], [ResponseAddress], [SentTime], [SourceAddress])
OUTPUT INSERTED.[SequenceNumber]
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
2024-05-29 10:22:37.735 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 10:22:37.741 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:22:37.769 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 10:22:37.821 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2024-05-29 10:22:37.888 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:22:37.896 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 10:22:37.923 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 10:22:37.929 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:22:37.941 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 10:22:37.971 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2024-05-29 10:22:37.976 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:22:37.990 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 10:22:38.034 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 10:22:38.039 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:22:38.048 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 10:22:38.100 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1
2024-05-29 10:22:38.119 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:22:38.188 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [OutboxMessage]
OUTPUT 1
WHERE [SequenceNumber] = @p0;
2024-05-29 10:22:40.022 +00:00 [INF] Executed DbCommand (32ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:22:50.060 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:23:00.072 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:23:10.126 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:23:10.179 +00:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int64), @p1='?' (Size = 8) (DbType = Binary), @p2='?' (DbType = Int64), @p3='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [InboxState]
OUTPUT 1
WHERE [Id] = @p0 AND [RowVersion] = @p1;
DELETE FROM [InboxState]
OUTPUT 1
WHERE [Id] = @p2 AND [RowVersion] = @p3;
2024-05-29 10:23:10.274 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:23:20.300 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:23:30.383 +00:00 [INF] Executed DbCommand (30ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:23:40.393 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:23:50.513 +00:00 [INF] Executed DbCommand (64ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:24:00.552 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:24:10.609 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:24:20.661 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:24:30.726 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:24:40.778 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:24:50.813 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:25:00.837 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:25:10.888 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:25:20.922 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:25:30.930 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:25:40.937 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:25:50.967 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:26:00.978 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:26:11.068 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:26:21.159 +00:00 [INF] Executed DbCommand (65ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:26:31.189 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:26:41.238 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:26:51.309 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:27:01.313 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:27:11.428 +00:00 [INF] Executed DbCommand (107ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:27:21.432 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:27:31.462 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:27:41.471 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:27:51.505 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:28:01.529 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:28:11.544 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:28:21.596 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:28:31.626 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:28:41.629 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:28:51.659 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:29:01.746 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:29:11.749 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:29:21.760 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:29:31.827 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:29:41.840 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:29:51.960 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:30:01.996 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:30:12.034 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:30:22.056 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:30:32.067 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:30:42.104 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:30:52.116 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:31:02.133 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:31:12.186 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:31:22.220 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:31:32.223 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:31:42.237 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:31:52.271 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:33:24.335 +00:00 [WRN] No store type was specified for the decimal property 'OrderTotal' on entity type 'OrderStateInstance'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-05-29 10:33:25.691 +00:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-05-29 10:33:25.733 +00:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-05-29 10:33:25.769 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-05-29 10:33:25.775 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-05-29 10:33:25.816 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-05-29 10:33:25.838 +00:00 [INF] No migrations were applied. The database is already up to date.
2024-05-29 10:33:26.185 +00:00 [INF] Configured endpoint create-order-message-queue, Saga: SagaOrchestration.StateInstances.OrderStateInstance, State Machine: SagaOrchestration.StateMachines.OrderStateMachine
2024-05-29 10:33:33.168 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-29 10:33:33.171 +00:00 [INF] Hosting environment: Development
2024-05-29 10:33:33.175 +00:00 [INF] Content root path: /app
2024-05-29 10:33:33.481 +00:00 [INF] Bus started: "rabbitmq://rabbitmq/"
2024-05-29 10:33:44.495 +00:00 [INF] Executed DbCommand (183ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:33:54.727 +00:00 [INF] Executed DbCommand (26ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:34:04.755 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:34:14.785 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:34:24.821 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:34:34.833 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:34:44.871 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:34:54.881 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:35:04.923 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:35:14.956 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:35:24.962 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:35:34.995 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:35:45.024 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:35:55.114 +00:00 [INF] Executed DbCommand (46ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:36:05.149 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:36:15.180 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:36:25.262 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:36:35.285 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:36:45.319 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:36:55.351 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:37:05.443 +00:00 [INF] Executed DbCommand (44ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:37:15.496 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:37:25.507 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:37:35.531 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:37:45.632 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:37:55.664 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:38:05.733 +00:00 [INF] Executed DbCommand (16ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:38:15.787 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:38:20.283 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 10:38:21.174 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:38:21.231 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int64), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = Int32), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InboxState] ([Consumed], [ConsumerId], [Delivered], [ExpirationTime], [LastSequenceNumber], [LockId], [MessageId], [ReceiveCount], [Received])
OUTPUT INSERTED.[Id], INSERTED.[RowVersion]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2024-05-29 10:38:21.399 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 10:38:21.423 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:38:21.454 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 10:38:21.583 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[CorrelationId], [o].[CreatedDate], [o].[CurrentState], [o].[CustomerId], [o].[OrderId], [o].[OrderTotal]
FROM [OrderStateInstance] AS [o]
WHERE [o].[OrderId] = 'e23882b6-b803-4b76-be2a-2505c29c1ba2'
2024-05-29 10:38:21.677 +00:00 [INF] CreateOrderMessage received in OrderStateMachine: CorrelationId: 31e6dc51-07ce-4a05-944b-55851f331ebb
CurrentState: Initial
OrderId: 00000000-0000-0000-0000-000000000000
CustomerId: 00000000-0000-0000-0000-000000000000
OrderTotal: 0
CreatedDate: 01/01/0001 00:00:00
------------------------ 
2024-05-29 10:38:21.932 +00:00 [INF] CheckBookStockCommand published in OrderStateMachine: CorrelationId: 31e6dc51-07ce-4a05-944b-55851f331ebb
CurrentState: StockCheck
OrderId: e23882b6-b803-4b76-be2a-2505c29c1ba2
CustomerId: 22e985e1-40a5-495b-9282-897853dd5d61
OrderTotal: 42.48
CreatedDate: 05/29/2024 10:38:21
------------------------ 
2024-05-29 10:38:21.997 +00:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderStateInstance] ([CorrelationId], [CreatedDate], [CurrentState], [CustomerId], [OrderId], [OrderTotal])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2024-05-29 10:38:22.103 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:38:22.160 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary), @p9='?' (Size = 4000), @p10='?' (Size = 256), @p11='?' (DbType = Guid), @p12='?' (DbType = Guid), @p13='?' (Size = 256), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (Size = 256), @p17='?' (Size = 4000), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = Guid), @p22='?' (Size = 4000), @p23='?' (DbType = Guid), @p24='?' (Size = 4000), @p25='?' (DbType = Guid), @p26='?' (Size = 256), @p27='?' (DbType = DateTime2), @p28='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
INSERT INTO [OutboxMessage] ([Body], [ContentType], [ConversationId], [CorrelationId], [DestinationAddress], [EnqueueTime], [ExpirationTime], [FaultAddress], [Headers], [InboxConsumerId], [InboxMessageId], [InitiatorId], [MessageId], [MessageType], [OutboxId], [Properties], [RequestId], [ResponseAddress], [SentTime], [SourceAddress])
OUTPUT INSERTED.[SequenceNumber]
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
2024-05-29 10:38:22.215 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 10:38:22.220 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:38:22.250 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 10:38:22.314 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2024-05-29 10:38:22.534 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:38:22.565 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 10:38:22.608 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 10:38:22.612 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:38:22.620 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 10:38:22.634 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2024-05-29 10:38:22.644 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:38:22.672 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 10:38:22.755 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 10:38:22.761 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:38:22.789 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 10:38:22.871 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[@__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1
2024-05-29 10:38:22.890 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:38:22.917 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [OutboxMessage]
OUTPUT 1
WHERE [SequenceNumber] = @p0;
2024-05-29 10:38:23.354 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 10:38:23.446 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:38:23.474 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int64), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = Int32), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InboxState] ([Consumed], [ConsumerId], [Delivered], [ExpirationTime], [LastSequenceNumber], [LockId], [MessageId], [ReceiveCount], [Received])
OUTPUT INSERTED.[Id], INSERTED.[RowVersion]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2024-05-29 10:38:23.495 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 10:38:23.499 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:38:23.526 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 10:38:23.588 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[CorrelationId], [o].[CreatedDate], [o].[CurrentState], [o].[CustomerId], [o].[OrderId], [o].[OrderTotal]
FROM [OrderStateInstance] AS [o]
WHERE [o].[CorrelationId] = @__id
2024-05-29 10:38:23.603 +00:00 [INF] StockReservationFailedEvent received in OrderStateMachine: CorrelationId: 31e6dc51-07ce-4a05-944b-55851f331ebb
CurrentState: StockCheck
OrderId: e23882b6-b803-4b76-be2a-2505c29c1ba2
CustomerId: 22e985e1-40a5-495b-9282-897853dd5d61
OrderTotal: 42.48
CreatedDate: 05/29/2024 10:38:21
------------------------ 
2024-05-29 10:38:23.685 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [OrderStateInstance] SET [CurrentState] = @p0
OUTPUT 1
WHERE [CorrelationId] = @p1;
2024-05-29 10:38:23.695 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:38:23.726 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary), @p9='?' (Size = 4000), @p10='?' (Size = 256), @p11='?' (DbType = Guid), @p12='?' (DbType = Guid), @p13='?' (Size = 256), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (Size = 256), @p17='?' (Size = 4000), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = Guid), @p22='?' (Size = 4000), @p23='?' (DbType = Guid), @p24='?' (Size = 4000), @p25='?' (DbType = Guid), @p26='?' (Size = 256), @p27='?' (DbType = DateTime2), @p28='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
INSERT INTO [OutboxMessage] ([Body], [ContentType], [ConversationId], [CorrelationId], [DestinationAddress], [EnqueueTime], [ExpirationTime], [FaultAddress], [Headers], [InboxConsumerId], [InboxMessageId], [InitiatorId], [MessageId], [MessageType], [OutboxId], [Properties], [RequestId], [ResponseAddress], [SentTime], [SourceAddress])
OUTPUT INSERTED.[SequenceNumber]
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
2024-05-29 10:38:23.743 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 10:38:23.747 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:38:23.773 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 10:38:23.783 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2024-05-29 10:38:23.824 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:38:23.833 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 10:38:23.900 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 10:38:23.924 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:38:23.953 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 10:38:24.004 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2024-05-29 10:38:24.009 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:38:24.039 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 10:38:24.077 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 10:38:24.082 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:38:24.112 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 10:38:24.122 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1
2024-05-29 10:38:24.130 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:38:24.145 +00:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [OutboxMessage]
OUTPUT 1
WHERE [SequenceNumber] = @p0;
2024-05-29 10:38:25.823 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:38:35.838 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:38:45.848 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:38:55.874 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:38:55.896 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int64), @p1='?' (Size = 8) (DbType = Binary), @p2='?' (DbType = Int64), @p3='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [InboxState]
OUTPUT 1
WHERE [Id] = @p0 AND [RowVersion] = @p1;
DELETE FROM [InboxState]
OUTPUT 1
WHERE [Id] = @p2 AND [RowVersion] = @p3;
2024-05-29 10:38:55.938 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:39:05.958 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:39:15.970 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:39:25.987 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:39:35.994 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:39:46.011 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:39:56.023 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:40:06.084 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:40:16.120 +00:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:40:26.176 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:40:36.202 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:40:46.210 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:40:56.247 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:41:06.255 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:41:16.298 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:41:26.399 +00:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:41:36.486 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:41:46.509 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:41:56.520 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:42:06.558 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:42:16.631 +00:00 [INF] Executed DbCommand (45ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:42:26.643 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:42:36.645 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:42:46.647 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:42:56.656 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:43:06.695 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:43:16.759 +00:00 [INF] Executed DbCommand (34ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:43:26.828 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:43:36.856 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:43:46.877 +00:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:43:56.929 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:49:05.699 +00:00 [WRN] No store type was specified for the decimal property 'OrderTotal' on entity type 'OrderStateInstance'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-05-29 10:49:09.433 +00:00 [INF] Executed DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-05-29 10:49:09.508 +00:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-05-29 10:49:09.522 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-05-29 10:49:09.554 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-05-29 10:49:09.632 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-05-29 10:49:09.683 +00:00 [INF] No migrations were applied. The database is already up to date.
2024-05-29 10:49:11.335 +00:00 [INF] Configured endpoint create-order-message-queue, Saga: SagaOrchestration.StateInstances.OrderStateInstance, State Machine: SagaOrchestration.StateMachines.OrderStateMachine
2024-05-29 10:49:16.987 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-29 10:49:17.011 +00:00 [INF] Hosting environment: Development
2024-05-29 10:49:17.015 +00:00 [INF] Content root path: /app
2024-05-29 10:49:17.567 +00:00 [INF] Bus started: "rabbitmq://rabbitmq/"
2024-05-29 10:49:28.710 +00:00 [INF] Executed DbCommand (211ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:49:38.966 +00:00 [INF] Executed DbCommand (27ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:49:49.004 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:49:59.018 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:50:09.066 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:50:19.121 +00:00 [INF] Executed DbCommand (26ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:50:29.217 +00:00 [INF] Executed DbCommand (87ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:50:39.297 +00:00 [INF] Executed DbCommand (68ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:50:49.386 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:50:59.460 +00:00 [INF] Executed DbCommand (46ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:51:09.546 +00:00 [INF] Executed DbCommand (69ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:51:19.577 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:51:29.632 +00:00 [INF] Executed DbCommand (26ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:51:37.366 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 10:51:37.637 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:51:37.671 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int64), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = Int32), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InboxState] ([Consumed], [ConsumerId], [Delivered], [ExpirationTime], [LastSequenceNumber], [LockId], [MessageId], [ReceiveCount], [Received])
OUTPUT INSERTED.[Id], INSERTED.[RowVersion]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2024-05-29 10:51:37.861 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 10:51:37.928 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:51:37.960 +00:00 [INF] Executed DbCommand (26ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 10:51:38.074 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[CorrelationId], [o].[CreatedDate], [o].[CurrentState], [o].[CustomerId], [o].[OrderId], [o].[OrderTotal]
FROM [OrderStateInstance] AS [o]
WHERE [o].[OrderId] = '226b0262-0483-409d-97a8-db5154b714b6'
2024-05-29 10:51:38.142 +00:00 [INF] CreateOrderMessage received in OrderStateMachine: CorrelationId: 48cd68e6-cee1-4aa6-8d69-b4baed6e498e
CurrentState: Initial
OrderId: 00000000-0000-0000-0000-000000000000
CustomerId: 00000000-0000-0000-0000-000000000000
OrderTotal: 0
CreatedDate: 01/01/0001 00:00:00
------------------------ 
2024-05-29 10:51:38.428 +00:00 [INF] CheckBookStockCommand published in OrderStateMachine: CorrelationId: 48cd68e6-cee1-4aa6-8d69-b4baed6e498e
CurrentState: StockCheck
OrderId: 226b0262-0483-409d-97a8-db5154b714b6
CustomerId: 22e985e1-40a5-495b-9282-897853dd5d61
OrderTotal: 42.48
CreatedDate: 05/29/2024 10:51:38
------------------------ 
2024-05-29 10:51:38.521 +00:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderStateInstance] ([CorrelationId], [CreatedDate], [CurrentState], [CustomerId], [OrderId], [OrderTotal])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2024-05-29 10:51:38.612 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:51:38.653 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary), @p9='?' (Size = 4000), @p10='?' (Size = 256), @p11='?' (DbType = Guid), @p12='?' (DbType = Guid), @p13='?' (Size = 256), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (Size = 256), @p17='?' (Size = 4000), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = Guid), @p22='?' (Size = 4000), @p23='?' (DbType = Guid), @p24='?' (Size = 4000), @p25='?' (DbType = Guid), @p26='?' (Size = 256), @p27='?' (DbType = DateTime2), @p28='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
INSERT INTO [OutboxMessage] ([Body], [ContentType], [ConversationId], [CorrelationId], [DestinationAddress], [EnqueueTime], [ExpirationTime], [FaultAddress], [Headers], [InboxConsumerId], [InboxMessageId], [InitiatorId], [MessageId], [MessageType], [OutboxId], [Properties], [RequestId], [ResponseAddress], [SentTime], [SourceAddress])
OUTPUT INSERTED.[SequenceNumber]
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
2024-05-29 10:51:38.720 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 10:51:38.731 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:51:38.762 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 10:51:38.870 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2024-05-29 10:51:39.061 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:51:39.089 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 10:51:39.157 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 10:51:39.164 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:51:39.194 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 10:51:39.225 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2024-05-29 10:51:39.235 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:51:39.252 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 10:51:39.356 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 10:51:39.362 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:51:39.402 +00:00 [INF] Executed DbCommand (9ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 10:51:39.434 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1
2024-05-29 10:51:39.464 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:51:39.512 +00:00 [INF] Executed DbCommand (38ms) [Parameters=[@p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [OutboxMessage]
OUTPUT 1
WHERE [SequenceNumber] = @p0;
2024-05-29 10:51:39.646 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:51:40.622 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 10:51:40.675 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:51:40.722 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int64), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = Int32), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InboxState] ([Consumed], [ConsumerId], [Delivered], [ExpirationTime], [LastSequenceNumber], [LockId], [MessageId], [ReceiveCount], [Received])
OUTPUT INSERTED.[Id], INSERTED.[RowVersion]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2024-05-29 10:51:40.798 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 10:51:40.809 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:51:40.851 +00:00 [INF] Executed DbCommand (9ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 10:51:41.005 +00:00 [INF] Executed DbCommand (27ms) [Parameters=[@__id='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[CorrelationId], [o].[CreatedDate], [o].[CurrentState], [o].[CustomerId], [o].[OrderId], [o].[OrderTotal]
FROM [OrderStateInstance] AS [o]
WHERE [o].[CorrelationId] = @__id
2024-05-29 10:51:41.064 +00:00 [INF] StockReservationFailedEvent received in OrderStateMachine: CorrelationId: 48cd68e6-cee1-4aa6-8d69-b4baed6e498e
CurrentState: StockCheck
OrderId: 226b0262-0483-409d-97a8-db5154b714b6
CustomerId: 22e985e1-40a5-495b-9282-897853dd5d61
OrderTotal: 42.48
CreatedDate: 05/29/2024 10:51:38
------------------------ 
2024-05-29 10:51:41.236 +00:00 [INF] Executed DbCommand (13ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [OrderStateInstance] SET [CurrentState] = @p0
OUTPUT 1
WHERE [CorrelationId] = @p1;
2024-05-29 10:51:41.256 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:51:41.311 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary), @p9='?' (Size = 4000), @p10='?' (Size = 256), @p11='?' (DbType = Guid), @p12='?' (DbType = Guid), @p13='?' (Size = 256), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (Size = 256), @p17='?' (Size = 4000), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = Guid), @p22='?' (Size = 4000), @p23='?' (DbType = Guid), @p24='?' (Size = 4000), @p25='?' (DbType = Guid), @p26='?' (Size = 256), @p27='?' (DbType = DateTime2), @p28='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
INSERT INTO [OutboxMessage] ([Body], [ContentType], [ConversationId], [CorrelationId], [DestinationAddress], [EnqueueTime], [ExpirationTime], [FaultAddress], [Headers], [InboxConsumerId], [InboxMessageId], [InitiatorId], [MessageId], [MessageType], [OutboxId], [Properties], [RequestId], [ResponseAddress], [SentTime], [SourceAddress])
OUTPUT INSERTED.[SequenceNumber]
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
2024-05-29 10:51:41.400 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 10:51:41.437 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:51:41.467 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 10:51:41.502 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2024-05-29 10:51:41.620 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:51:41.673 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 10:51:41.790 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 10:51:41.853 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:51:41.899 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 10:51:41.962 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2024-05-29 10:51:41.985 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:51:42.037 +00:00 [INF] Executed DbCommand (45ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 10:51:42.159 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 10:51:42.172 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:51:42.188 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 10:51:42.234 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1
2024-05-29 10:51:42.260 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 10:51:42.306 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [OutboxMessage]
OUTPUT 1
WHERE [SequenceNumber] = @p0;
2024-05-29 10:51:49.703 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:51:59.714 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:52:09.717 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:52:09.735 +00:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = Int64), @p1='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [InboxState]
OUTPUT 1
WHERE [Id] = @p0 AND [RowVersion] = @p1;
2024-05-29 10:52:09.769 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:52:19.787 +00:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:52:19.838 +00:00 [INF] Executed DbCommand (17ms) [Parameters=[@p0='?' (DbType = Int64), @p1='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [InboxState]
OUTPUT 1
WHERE [Id] = @p0 AND [RowVersion] = @p1;
2024-05-29 10:52:19.919 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:52:29.958 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:52:40.066 +00:00 [INF] Executed DbCommand (46ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:52:50.118 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:53:00.119 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:53:10.157 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:53:20.174 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:53:30.200 +00:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:53:40.251 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:53:50.325 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:54:00.354 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:54:10.484 +00:00 [INF] Executed DbCommand (85ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:54:20.589 +00:00 [INF] Executed DbCommand (26ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:54:30.633 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:54:40.682 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:56:49.268 +00:00 [WRN] No store type was specified for the decimal property 'OrderTotal' on entity type 'OrderStateInstance'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-05-29 10:56:52.354 +00:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-05-29 10:56:52.462 +00:00 [INF] Executed DbCommand (55ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-05-29 10:56:52.513 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-05-29 10:56:52.552 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-05-29 10:56:52.651 +00:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-05-29 10:56:52.715 +00:00 [INF] No migrations were applied. The database is already up to date.
2024-05-29 10:56:53.579 +00:00 [INF] Configured endpoint create-order-message-queue, Saga: SagaOrchestration.StateInstances.OrderStateInstance, State Machine: SagaOrchestration.StateMachines.OrderStateMachine
2024-05-29 10:57:03.233 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-29 10:57:03.243 +00:00 [INF] Hosting environment: Development
2024-05-29 10:57:03.280 +00:00 [INF] Content root path: /app
2024-05-29 10:57:03.733 +00:00 [INF] Bus started: "rabbitmq://rabbitmq/"
2024-05-29 10:57:14.762 +00:00 [INF] Executed DbCommand (144ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:57:24.895 +00:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:57:34.909 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:57:44.933 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:57:54.966 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:58:04.971 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:58:14.991 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:58:25.007 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:58:35.042 +00:00 [INF] Executed DbCommand (26ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:58:45.077 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:58:55.124 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:59:05.172 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:59:15.254 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:59:25.283 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:59:35.364 +00:00 [INF] Executed DbCommand (34ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:59:45.398 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 10:59:55.433 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 11:00:05.460 +00:00 [INF] Executed DbCommand (16ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 11:00:15.467 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 11:00:15.670 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 11:00:16.011 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 11:00:16.024 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int64), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = Int32), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InboxState] ([Consumed], [ConsumerId], [Delivered], [ExpirationTime], [LastSequenceNumber], [LockId], [MessageId], [ReceiveCount], [Received])
OUTPUT INSERTED.[Id], INSERTED.[RowVersion]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2024-05-29 11:00:16.213 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 11:00:16.250 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 11:00:16.302 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 11:00:16.443 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[CorrelationId], [o].[CreatedDate], [o].[CurrentState], [o].[CustomerId], [o].[OrderId], [o].[OrderTotal]
FROM [OrderStateInstance] AS [o]
WHERE [o].[OrderId] = 'e1023752-b97e-419b-9877-47c87babd518'
2024-05-29 11:00:16.550 +00:00 [INF] CreateOrderMessage received in OrderStateMachine: CorrelationId: 04cd3ec2-aef8-4fbb-904a-23c900c78b54
CurrentState: Initial
OrderId: 00000000-0000-0000-0000-000000000000
CustomerId: 00000000-0000-0000-0000-000000000000
OrderTotal: 0
CreatedDate: 01/01/0001 00:00:00
------------------------ 
2024-05-29 11:00:16.868 +00:00 [INF] CheckBookStockCommand published in OrderStateMachine: CorrelationId: 04cd3ec2-aef8-4fbb-904a-23c900c78b54
CurrentState: StockCheck
OrderId: e1023752-b97e-419b-9877-47c87babd518
CustomerId: 22e985e1-40a5-495b-9282-897853dd5d61
OrderTotal: 42.48
CreatedDate: 05/29/2024 11:00:16
------------------------ 
2024-05-29 11:00:16.976 +00:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderStateInstance] ([CorrelationId], [CreatedDate], [CurrentState], [CustomerId], [OrderId], [OrderTotal])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2024-05-29 11:00:17.030 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 11:00:17.062 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary), @p9='?' (Size = 4000), @p10='?' (Size = 256), @p11='?' (DbType = Guid), @p12='?' (DbType = Guid), @p13='?' (Size = 256), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (Size = 256), @p17='?' (Size = 4000), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = Guid), @p22='?' (Size = 4000), @p23='?' (DbType = Guid), @p24='?' (Size = 4000), @p25='?' (DbType = Guid), @p26='?' (Size = 256), @p27='?' (DbType = DateTime2), @p28='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
INSERT INTO [OutboxMessage] ([Body], [ContentType], [ConversationId], [CorrelationId], [DestinationAddress], [EnqueueTime], [ExpirationTime], [FaultAddress], [Headers], [InboxConsumerId], [InboxMessageId], [InitiatorId], [MessageId], [MessageType], [OutboxId], [Properties], [RequestId], [ResponseAddress], [SentTime], [SourceAddress])
OUTPUT INSERTED.[SequenceNumber]
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
2024-05-29 11:00:17.138 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 11:00:17.143 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 11:00:17.172 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 11:00:17.209 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2024-05-29 11:00:17.382 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 11:00:17.390 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 11:00:17.460 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 11:00:17.466 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 11:00:17.496 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 11:00:17.596 +00:00 [INF] Executed DbCommand (45ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2024-05-29 11:00:17.604 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 11:00:17.677 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 11:00:17.716 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 11:00:17.727 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 11:00:17.758 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 11:00:17.812 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1
2024-05-29 11:00:17.864 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 11:00:17.878 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [OutboxMessage]
OUTPUT 1
WHERE [SequenceNumber] = @p0;
2024-05-29 11:00:19.017 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 11:00:19.046 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 11:00:19.054 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int64), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = Int32), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InboxState] ([Consumed], [ConsumerId], [Delivered], [ExpirationTime], [LastSequenceNumber], [LockId], [MessageId], [ReceiveCount], [Received])
OUTPUT INSERTED.[Id], INSERTED.[RowVersion]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2024-05-29 11:00:19.147 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 11:00:19.182 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 11:00:19.226 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 11:00:19.326 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[CorrelationId], [o].[CreatedDate], [o].[CurrentState], [o].[CustomerId], [o].[OrderId], [o].[OrderTotal]
FROM [OrderStateInstance] AS [o]
WHERE [o].[CorrelationId] = @__id
2024-05-29 11:00:19.368 +00:00 [INF] StockReservationFailedEvent received in OrderStateMachine: CorrelationId: 04cd3ec2-aef8-4fbb-904a-23c900c78b54
CurrentState: StockCheck
OrderId: e1023752-b97e-419b-9877-47c87babd518
CustomerId: 22e985e1-40a5-495b-9282-897853dd5d61
OrderTotal: 42.48
CreatedDate: 05/29/2024 11:00:16
------------------------ 
2024-05-29 11:00:19.475 +00:00 [INF] Executed DbCommand (15ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [OrderStateInstance] SET [CurrentState] = @p0
OUTPUT 1
WHERE [CorrelationId] = @p1;
2024-05-29 11:00:19.507 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 11:00:19.535 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary), @p9='?' (Size = 4000), @p10='?' (Size = 256), @p11='?' (DbType = Guid), @p12='?' (DbType = Guid), @p13='?' (Size = 256), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (Size = 256), @p17='?' (Size = 4000), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = Guid), @p22='?' (Size = 4000), @p23='?' (DbType = Guid), @p24='?' (Size = 4000), @p25='?' (DbType = Guid), @p26='?' (Size = 256), @p27='?' (DbType = DateTime2), @p28='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
INSERT INTO [OutboxMessage] ([Body], [ContentType], [ConversationId], [CorrelationId], [DestinationAddress], [EnqueueTime], [ExpirationTime], [FaultAddress], [Headers], [InboxConsumerId], [InboxMessageId], [InitiatorId], [MessageId], [MessageType], [OutboxId], [Properties], [RequestId], [ResponseAddress], [SentTime], [SourceAddress])
OUTPUT INSERTED.[SequenceNumber]
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
2024-05-29 11:00:19.580 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 11:00:19.585 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 11:00:19.591 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 11:00:19.626 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2024-05-29 11:00:19.674 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 11:00:19.706 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 11:00:19.746 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 11:00:19.756 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 11:00:19.808 +00:00 [INF] Executed DbCommand (27ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 11:00:19.842 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2024-05-29 11:00:19.867 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 11:00:19.876 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 11:00:19.924 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 11:00:19.929 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 11:00:19.940 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 11:00:19.950 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1
2024-05-29 11:00:19.978 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 11:00:19.989 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [OutboxMessage]
OUTPUT 1
WHERE [SequenceNumber] = @p0;
2024-05-29 11:00:25.528 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 11:00:35.535 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 11:00:45.595 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:35:45.730 +00:00 [WRN] No store type was specified for the decimal property 'OrderTotal' on entity type 'OrderStateInstance'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-05-29 16:35:49.207 +00:00 [WRN] No store type was specified for the decimal property 'OrderTotal' on entity type 'OrderStateInstance'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-05-29 16:35:50.185 +00:00 [INF] Executed DbCommand (690ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [StateMachineDb];
2024-05-29 16:35:50.553 +00:00 [INF] Executed DbCommand (338ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [StateMachineDb] SET READ_COMMITTED_SNAPSHOT ON;
END;
2024-05-29 16:35:50.619 +00:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-05-29 16:35:50.767 +00:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2024-05-29 16:35:50.795 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-05-29 16:35:50.842 +00:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-05-29 16:35:50.876 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-05-29 16:35:50.902 +00:00 [INF] Applying migration '20240517112515_InitialMigration'.
2024-05-29 16:35:50.970 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [InboxState] (
    [Id] bigint NOT NULL IDENTITY,
    [MessageId] uniqueidentifier NOT NULL,
    [ConsumerId] uniqueidentifier NOT NULL,
    [LockId] uniqueidentifier NOT NULL,
    [RowVersion] rowversion NULL,
    [Received] datetime2 NOT NULL,
    [ReceiveCount] int NOT NULL,
    [ExpirationTime] datetime2 NULL,
    [Consumed] datetime2 NULL,
    [Delivered] datetime2 NULL,
    [LastSequenceNumber] bigint NULL,
    CONSTRAINT [PK_InboxState] PRIMARY KEY ([Id]),
    CONSTRAINT [AK_InboxState_MessageId_ConsumerId] UNIQUE ([MessageId], [ConsumerId])
);
2024-05-29 16:35:50.980 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [OrderStateInstance] (
    [CorrelationId] uniqueidentifier NOT NULL,
    [CurrentState] nvarchar(max) NOT NULL,
    [OrderId] uniqueidentifier NOT NULL,
    [CustomerId] uniqueidentifier NOT NULL,
    [OrderTotal] decimal(18,2) NOT NULL,
    [CreatedDate] datetime2 NOT NULL,
    CONSTRAINT [PK_OrderStateInstance] PRIMARY KEY ([CorrelationId])
);
2024-05-29 16:35:51.010 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [OutboxMessage] (
    [SequenceNumber] bigint NOT NULL IDENTITY,
    [EnqueueTime] datetime2 NULL,
    [SentTime] datetime2 NOT NULL,
    [Headers] nvarchar(max) NULL,
    [Properties] nvarchar(max) NULL,
    [InboxMessageId] uniqueidentifier NULL,
    [InboxConsumerId] uniqueidentifier NULL,
    [OutboxId] uniqueidentifier NULL,
    [MessageId] uniqueidentifier NOT NULL,
    [ContentType] nvarchar(256) NOT NULL,
    [MessageType] nvarchar(max) NOT NULL,
    [Body] nvarchar(max) NOT NULL,
    [ConversationId] uniqueidentifier NULL,
    [CorrelationId] uniqueidentifier NULL,
    [InitiatorId] uniqueidentifier NULL,
    [RequestId] uniqueidentifier NULL,
    [SourceAddress] nvarchar(256) NULL,
    [DestinationAddress] nvarchar(256) NULL,
    [ResponseAddress] nvarchar(256) NULL,
    [FaultAddress] nvarchar(256) NULL,
    [ExpirationTime] datetime2 NULL,
    CONSTRAINT [PK_OutboxMessage] PRIMARY KEY ([SequenceNumber])
);
2024-05-29 16:35:51.020 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [OutboxState] (
    [OutboxId] uniqueidentifier NOT NULL,
    [LockId] uniqueidentifier NOT NULL,
    [RowVersion] rowversion NULL,
    [Created] datetime2 NOT NULL,
    [Delivered] datetime2 NULL,
    [LastSequenceNumber] bigint NULL,
    CONSTRAINT [PK_OutboxState] PRIMARY KEY ([OutboxId])
);
2024-05-29 16:35:51.029 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_InboxState_Delivered] ON [InboxState] ([Delivered]);
2024-05-29 16:35:51.039 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_OutboxMessage_EnqueueTime] ON [OutboxMessage] ([EnqueueTime]);
2024-05-29 16:35:51.053 +00:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_OutboxMessage_ExpirationTime] ON [OutboxMessage] ([ExpirationTime]);
2024-05-29 16:35:51.083 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_OutboxMessage_InboxMessageId_InboxConsumerId_SequenceNumber] ON [OutboxMessage] ([InboxMessageId], [InboxConsumerId], [SequenceNumber]) WHERE [InboxMessageId] IS NOT NULL AND [InboxConsumerId] IS NOT NULL;
2024-05-29 16:35:51.091 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_OutboxMessage_OutboxId_SequenceNumber] ON [OutboxMessage] ([OutboxId], [SequenceNumber]) WHERE [OutboxId] IS NOT NULL;
2024-05-29 16:35:51.098 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_OutboxState_Created] ON [OutboxState] ([Created]);
2024-05-29 16:35:51.124 +00:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20240517112515_InitialMigration', N'8.0.4');
2024-05-29 16:35:52.051 +00:00 [INF] Configured endpoint create-order-message-queue, Saga: SagaOrchestration.StateInstances.OrderStateInstance, State Machine: SagaOrchestration.StateMachines.OrderStateMachine
2024-05-29 16:36:00.827 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-29 16:36:00.837 +00:00 [INF] Hosting environment: Development
2024-05-29 16:36:00.845 +00:00 [INF] Content root path: /app
2024-05-29 16:36:01.356 +00:00 [INF] Bus started: "rabbitmq://rabbitmq/"
2024-05-29 16:36:12.830 +00:00 [INF] Executed DbCommand (423ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:36:23.116 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:36:33.155 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:36:43.191 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:36:53.236 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:37:03.249 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:37:13.287 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:37:23.290 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:37:33.298 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:37:43.333 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:37:53.380 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:38:03.447 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:38:13.480 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:38:23.533 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:38:33.538 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:38:43.597 +00:00 [INF] Executed DbCommand (27ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:38:53.671 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:39:03.727 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:39:13.753 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:39:23.797 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:39:33.849 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:39:43.875 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:39:53.913 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:45:57.266 +00:00 [WRN] No store type was specified for the decimal property 'OrderTotal' on entity type 'OrderStateInstance'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-05-29 16:45:59.540 +00:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-05-29 16:45:59.647 +00:00 [INF] Executed DbCommand (73ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-05-29 16:45:59.663 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-05-29 16:45:59.676 +00:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-05-29 16:45:59.767 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-05-29 16:45:59.800 +00:00 [INF] No migrations were applied. The database is already up to date.
2024-05-29 16:46:00.641 +00:00 [INF] Configured endpoint create-order-message-queue, Saga: SagaOrchestration.StateInstances.OrderStateInstance, State Machine: SagaOrchestration.StateMachines.OrderStateMachine
2024-05-29 16:46:20.898 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-29 16:46:20.901 +00:00 [INF] Hosting environment: Development
2024-05-29 16:46:20.906 +00:00 [INF] Content root path: /app
2024-05-29 16:46:21.260 +00:00 [INF] Bus started: "rabbitmq://rabbitmq/"
2024-05-29 16:46:32.512 +00:00 [INF] Executed DbCommand (102ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:46:42.780 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:46:52.789 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:47:02.800 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:47:12.837 +00:00 [INF] Executed DbCommand (27ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:47:22.872 +00:00 [INF] Executed DbCommand (28ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:47:32.898 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:47:42.933 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:47:52.959 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:48:02.968 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:48:12.994 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:48:23.066 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:48:33.096 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:48:43.132 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:48:53.168 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:49:03.212 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:49:13.258 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:49:23.284 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:49:33.340 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:49:43.378 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:49:53.404 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:50:03.476 +00:00 [INF] Executed DbCommand (44ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:50:13.484 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:50:23.512 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:50:33.637 +00:00 [INF] Executed DbCommand (45ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:50:43.682 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:50:53.732 +00:00 [INF] Executed DbCommand (21ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:51:03.764 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:51:13.777 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:51:23.784 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:51:33.821 +00:00 [INF] Executed DbCommand (26ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:51:43.830 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:51:53.843 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:52:03.861 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:52:13.868 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:52:23.900 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:52:33.912 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:52:42.767 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 16:52:43.074 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 16:52:43.108 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int64), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = Int32), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InboxState] ([Consumed], [ConsumerId], [Delivered], [ExpirationTime], [LastSequenceNumber], [LockId], [MessageId], [ReceiveCount], [Received])
OUTPUT INSERTED.[Id], INSERTED.[RowVersion]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2024-05-29 16:52:43.321 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 16:52:43.344 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 16:52:43.395 +00:00 [INF] Executed DbCommand (42ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 16:52:43.871 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[CorrelationId], [o].[CreatedDate], [o].[CurrentState], [o].[CustomerId], [o].[OrderId], [o].[OrderTotal]
FROM [OrderStateInstance] AS [o]
WHERE [o].[OrderId] = '28e62172-c99e-4a9d-9854-47af37c430bf'
2024-05-29 16:52:43.954 +00:00 [INF] Executed DbCommand (18ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:52:44.007 +00:00 [INF] CreateOrderMessage received in OrderStateMachine: CorrelationId: e2a321ac-98ca-4748-8f55-f70f1e018878
CurrentState: Initial
OrderId: 00000000-0000-0000-0000-000000000000
CustomerId: 00000000-0000-0000-0000-000000000000
OrderTotal: 0
CreatedDate: 01/01/0001 00:00:00
------------------------ 
2024-05-29 16:52:44.337 +00:00 [INF] CheckBookStockCommand published in OrderStateMachine: CorrelationId: e2a321ac-98ca-4748-8f55-f70f1e018878
CurrentState: StockCheck
OrderId: 28e62172-c99e-4a9d-9854-47af37c430bf
CustomerId: 22e985e1-40a5-495b-9282-897853dd5d61
OrderTotal: 42.48
CreatedDate: 05/29/2024 16:52:44
------------------------ 
2024-05-29 16:52:44.420 +00:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderStateInstance] ([CorrelationId], [CreatedDate], [CurrentState], [CustomerId], [OrderId], [OrderTotal])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2024-05-29 16:52:44.485 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 16:52:44.526 +00:00 [INF] Executed DbCommand (13ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary), @p9='?' (Size = 4000), @p10='?' (Size = 256), @p11='?' (DbType = Guid), @p12='?' (DbType = Guid), @p13='?' (Size = 256), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (Size = 256), @p17='?' (Size = 4000), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = Guid), @p22='?' (Size = 4000), @p23='?' (DbType = Guid), @p24='?' (Size = 4000), @p25='?' (DbType = Guid), @p26='?' (Size = 256), @p27='?' (DbType = DateTime2), @p28='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
INSERT INTO [OutboxMessage] ([Body], [ContentType], [ConversationId], [CorrelationId], [DestinationAddress], [EnqueueTime], [ExpirationTime], [FaultAddress], [Headers], [InboxConsumerId], [InboxMessageId], [InitiatorId], [MessageId], [MessageType], [OutboxId], [Properties], [RequestId], [ResponseAddress], [SentTime], [SourceAddress])
OUTPUT INSERTED.[SequenceNumber]
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
2024-05-29 16:52:44.583 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 16:52:44.589 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 16:52:44.618 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 16:52:44.722 +00:00 [INF] Executed DbCommand (54ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2024-05-29 16:52:44.854 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 16:52:44.861 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 16:52:44.922 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 16:52:44.947 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 16:52:44.974 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 16:52:44.984 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2024-05-29 16:52:45.012 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 16:52:45.038 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 16:52:45.063 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 16:52:45.067 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 16:52:45.095 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 16:52:45.125 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[@__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1
2024-05-29 16:52:45.153 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 16:52:45.179 +00:00 [INF] Executed DbCommand (22ms) [Parameters=[@p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [OutboxMessage]
OUTPUT 1
WHERE [SequenceNumber] = @p0;
2024-05-29 16:52:45.844 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 16:52:45.875 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 16:52:45.903 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int64), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = Int32), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InboxState] ([Consumed], [ConsumerId], [Delivered], [ExpirationTime], [LastSequenceNumber], [LockId], [MessageId], [ReceiveCount], [Received])
OUTPUT INSERTED.[Id], INSERTED.[RowVersion]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2024-05-29 16:52:45.940 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 16:52:45.965 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 16:52:45.993 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 16:52:46.058 +00:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[CorrelationId], [o].[CreatedDate], [o].[CurrentState], [o].[CustomerId], [o].[OrderId], [o].[OrderTotal]
FROM [OrderStateInstance] AS [o]
WHERE [o].[CorrelationId] = @__id
2024-05-29 16:52:46.083 +00:00 [INF] StockReservationFailedEvent received in OrderStateMachine: CorrelationId: e2a321ac-98ca-4748-8f55-f70f1e018878
CurrentState: StockCheck
OrderId: 28e62172-c99e-4a9d-9854-47af37c430bf
CustomerId: 22e985e1-40a5-495b-9282-897853dd5d61
OrderTotal: 42.48
CreatedDate: 05/29/2024 16:52:44
------------------------ 
2024-05-29 16:52:46.136 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [OrderStateInstance] SET [CurrentState] = @p0
OUTPUT 1
WHERE [CorrelationId] = @p1;
2024-05-29 16:52:46.144 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 16:52:46.151 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary), @p9='?' (Size = 4000), @p10='?' (Size = 256), @p11='?' (DbType = Guid), @p12='?' (DbType = Guid), @p13='?' (Size = 256), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (Size = 256), @p17='?' (Size = 4000), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = Guid), @p22='?' (Size = 4000), @p23='?' (DbType = Guid), @p24='?' (Size = 4000), @p25='?' (DbType = Guid), @p26='?' (Size = 256), @p27='?' (DbType = DateTime2), @p28='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
INSERT INTO [OutboxMessage] ([Body], [ContentType], [ConversationId], [CorrelationId], [DestinationAddress], [EnqueueTime], [ExpirationTime], [FaultAddress], [Headers], [InboxConsumerId], [InboxMessageId], [InitiatorId], [MessageId], [MessageType], [OutboxId], [Properties], [RequestId], [ResponseAddress], [SentTime], [SourceAddress])
OUTPUT INSERTED.[SequenceNumber]
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
2024-05-29 16:52:46.193 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 16:52:46.198 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 16:52:46.205 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 16:52:46.214 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2024-05-29 16:52:46.253 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 16:52:46.281 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 16:52:46.318 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 16:52:46.324 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 16:52:46.354 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 16:52:46.366 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2024-05-29 16:52:46.391 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 16:52:46.397 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 16:52:46.415 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2024-05-29 16:52:46.420 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 16:52:46.427 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2024-05-29 16:52:46.435 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1
2024-05-29 16:52:46.460 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2024-05-29 16:52:46.467 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [OutboxMessage]
OUTPUT 1
WHERE [SequenceNumber] = @p0;
2024-05-29 16:52:53.996 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:53:04.029 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:53:14.082 +00:00 [INF] Executed DbCommand (46ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:53:24.107 +00:00 [INF] Executed DbCommand (22ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:53:24.182 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int64), @p1='?' (Size = 8) (DbType = Binary), @p2='?' (DbType = Int64), @p3='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [InboxState]
OUTPUT 1
WHERE [Id] = @p0 AND [RowVersion] = @p1;
DELETE FROM [InboxState]
OUTPUT 1
WHERE [Id] = @p2 AND [RowVersion] = @p3;
2024-05-29 16:53:24.237 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:53:34.287 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:53:44.336 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:53:54.348 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:54:04.361 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:54:14.364 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:54:24.400 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:54:34.400 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:54:44.414 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2024-05-29 16:54:54.422 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
