2025-06-26 12:39:18.953 +00:00 [WRN] No store type was specified for the decimal property 'OrderTotal' on entity type 'OrderStateInstance'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-06-26 12:39:23.901 +00:00 [WRN] No store type was specified for the decimal property 'OrderTotal' on entity type 'OrderStateInstance'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-06-26 12:39:26.776 +00:00 [INF] Executed DbCommand (2,555ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [StateMachineDb];
2025-06-26 12:39:29.024 +00:00 [INF] Executed DbCommand (2,200ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [StateMachineDb] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-06-26 12:39:29.337 +00:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-26 12:39:29.996 +00:00 [INF] Executed DbCommand (258ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-06-26 12:39:30.029 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-26 12:39:30.144 +00:00 [INF] Executed DbCommand (67ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-26 12:39:30.353 +00:00 [INF] Executed DbCommand (151ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-26 12:39:30.462 +00:00 [INF] Applying migration '20250513122500_InitialMigration'.
2025-06-26 12:39:30.782 +00:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [InboxState] (
    [Id] bigint NOT NULL IDENTITY,
    [MessageId] uniqueidentifier NOT NULL,
    [ConsumerId] uniqueidentifier NOT NULL,
    [LockId] uniqueidentifier NOT NULL,
    [RowVersion] rowversion NULL,
    [Received] datetime2 NOT NULL,
    [ReceiveCount] int NOT NULL,
    [ExpirationTime] datetime2 NULL,
    [Consumed] datetime2 NULL,
    [Delivered] datetime2 NULL,
    [LastSequenceNumber] bigint NULL,
    CONSTRAINT [PK_InboxState] PRIMARY KEY ([Id]),
    CONSTRAINT [AK_InboxState_MessageId_ConsumerId] UNIQUE ([MessageId], [ConsumerId])
);
2025-06-26 12:39:30.802 +00:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [OrderStateInstance] (
    [CorrelationId] uniqueidentifier NOT NULL,
    [CurrentState] nvarchar(max) NOT NULL,
    [OrderId] uniqueidentifier NOT NULL,
    [CustomerId] uniqueidentifier NOT NULL,
    [OrderTotal] decimal(18,2) NOT NULL,
    [CreatedDate] datetime2 NOT NULL,
    CONSTRAINT [PK_OrderStateInstance] PRIMARY KEY ([CorrelationId])
);
2025-06-26 12:39:30.821 +00:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [OutboxMessage] (
    [SequenceNumber] bigint NOT NULL IDENTITY,
    [EnqueueTime] datetime2 NULL,
    [SentTime] datetime2 NOT NULL,
    [Headers] nvarchar(max) NULL,
    [Properties] nvarchar(max) NULL,
    [InboxMessageId] uniqueidentifier NULL,
    [InboxConsumerId] uniqueidentifier NULL,
    [OutboxId] uniqueidentifier NULL,
    [MessageId] uniqueidentifier NOT NULL,
    [ContentType] nvarchar(256) NOT NULL,
    [MessageType] nvarchar(max) NOT NULL,
    [Body] nvarchar(max) NOT NULL,
    [ConversationId] uniqueidentifier NULL,
    [CorrelationId] uniqueidentifier NULL,
    [InitiatorId] uniqueidentifier NULL,
    [RequestId] uniqueidentifier NULL,
    [SourceAddress] nvarchar(256) NULL,
    [DestinationAddress] nvarchar(256) NULL,
    [ResponseAddress] nvarchar(256) NULL,
    [FaultAddress] nvarchar(256) NULL,
    [ExpirationTime] datetime2 NULL,
    CONSTRAINT [PK_OutboxMessage] PRIMARY KEY ([SequenceNumber])
);
2025-06-26 12:39:30.837 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [OutboxState] (
    [OutboxId] uniqueidentifier NOT NULL,
    [LockId] uniqueidentifier NOT NULL,
    [RowVersion] rowversion NULL,
    [Created] datetime2 NOT NULL,
    [Delivered] datetime2 NULL,
    [LastSequenceNumber] bigint NULL,
    CONSTRAINT [PK_OutboxState] PRIMARY KEY ([OutboxId])
);
2025-06-26 12:39:30.862 +00:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_InboxState_Delivered] ON [InboxState] ([Delivered]);
2025-06-26 12:39:30.894 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_OutboxMessage_EnqueueTime] ON [OutboxMessage] ([EnqueueTime]);
2025-06-26 12:39:30.926 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_OutboxMessage_ExpirationTime] ON [OutboxMessage] ([ExpirationTime]);
2025-06-26 12:39:30.943 +00:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_OutboxMessage_InboxMessageId_InboxConsumerId_SequenceNumber] ON [OutboxMessage] ([InboxMessageId], [InboxConsumerId], [SequenceNumber]) WHERE [InboxMessageId] IS NOT NULL AND [InboxConsumerId] IS NOT NULL;
2025-06-26 12:39:30.975 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_OutboxMessage_OutboxId_SequenceNumber] ON [OutboxMessage] ([OutboxId], [SequenceNumber]) WHERE [OutboxId] IS NOT NULL;
2025-06-26 12:39:31.032 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_OutboxState_Created] ON [OutboxState] ([Created]);
2025-06-26 12:39:31.104 +00:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250513122500_InitialMigration', N'8.0.8');
2025-06-26 12:39:33.171 +00:00 [INF] Configured endpoint create-order-message-queue, Saga: SagaOrchestration.StateInstances.OrderStateInstance, State Machine: SagaOrchestration.StateMachines.OrderStateMachine
2025-06-26 12:39:35.508 +00:00 [INF] Now listening on: http://[::]:8080
2025-06-26 12:39:35.530 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-26 12:39:35.537 +00:00 [INF] Hosting environment: Development
2025-06-26 12:39:35.550 +00:00 [INF] Content root path: /app
2025-06-26 12:39:37.348 +00:00 [INF] Bus started: "rabbitmq://rabbitmq/"
2025-06-26 12:39:46.491 +00:00 [INF] Executed DbCommand (259ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:39:56.667 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:40:06.683 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:40:16.694 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:40:26.715 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:40:36.764 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:40:46.778 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:40:56.811 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:41:06.826 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:41:16.839 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:41:26.876 +00:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:41:36.931 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:41:46.944 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:41:56.981 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:42:05.974 +00:00 [INF] Executed DbCommand (26ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 12:42:06.006 +00:00 [INF] Executed DbCommand (58ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 12:42:06.464 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 12:42:06.464 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 12:42:06.491 +00:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int64), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = Int32), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InboxState] ([Consumed], [ConsumerId], [Delivered], [ExpirationTime], [LastSequenceNumber], [LockId], [MessageId], [ReceiveCount], [Received])
OUTPUT INSERTED.[Id], INSERTED.[RowVersion]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-06-26 12:42:06.491 +00:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int64), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = Int32), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InboxState] ([Consumed], [ConsumerId], [Delivered], [ExpirationTime], [LastSequenceNumber], [LockId], [MessageId], [ReceiveCount], [Received])
OUTPUT INSERTED.[Id], INSERTED.[RowVersion]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-06-26 12:42:06.629 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 12:42:06.631 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 12:42:06.682 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 12:42:06.682 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 12:42:06.712 +00:00 [INF] Executed DbCommand (20ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 12:42:06.718 +00:00 [INF] Executed DbCommand (26ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 12:42:06.880 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[CorrelationId], [o].[CreatedDate], [o].[CurrentState], [o].[CustomerId], [o].[OrderId], [o].[OrderTotal]
FROM [OrderStateInstance] AS [o]
WHERE [o].[OrderId] = '060cf56f-ddbb-4312-a8c7-bd4a30f4015b'
2025-06-26 12:42:06.920 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[CorrelationId], [o].[CreatedDate], [o].[CurrentState], [o].[CustomerId], [o].[OrderId], [o].[OrderTotal]
FROM [OrderStateInstance] AS [o]
WHERE [o].[OrderId] = '060cf56f-ddbb-4312-a8c7-bd4a30f4015b'
2025-06-26 12:42:07.016 +00:00 [INF] Executed DbCommand (26ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:42:07.016 +00:00 [INF] CreateOrderMessage received in OrderStateMachine: CorrelationId: 4730bb86-b8bc-47b6-a9d5-5f18a04d86b4
CurrentState: Initial
OrderId: 00000000-0000-0000-0000-000000000000
CustomerId: 00000000-0000-0000-0000-000000000000
OrderTotal: 0
CreatedDate: 01/01/0001 00:00:00
------------------------ 
2025-06-26 12:42:07.016 +00:00 [INF] CreateOrderMessage received in OrderStateMachine: CorrelationId: 923d7ad0-b705-4ff0-8ff8-b61443f9f8d0
CurrentState: Initial
OrderId: 00000000-0000-0000-0000-000000000000
CustomerId: 00000000-0000-0000-0000-000000000000
OrderTotal: 0
CreatedDate: 01/01/0001 00:00:00
------------------------ 
2025-06-26 12:42:35.643 +00:00 [INF] Executed DbCommand (54ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:42:35.879 +00:00 [INF] CheckBookStockCommand published in OrderStateMachine: CorrelationId: 4730bb86-b8bc-47b6-a9d5-5f18a04d86b4
CurrentState: StockCheck
OrderId: 060cf56f-ddbb-4312-a8c7-bd4a30f4015b
CustomerId: ff4c0714-0ead-4919-afdf-39b22c978f91
OrderTotal: 0.0
CreatedDate: 06/26/2025 12:42:35
------------------------ 
2025-06-26 12:42:35.879 +00:00 [INF] CheckBookStockCommand published in OrderStateMachine: CorrelationId: 923d7ad0-b705-4ff0-8ff8-b61443f9f8d0
CurrentState: StockCheck
OrderId: 060cf56f-ddbb-4312-a8c7-bd4a30f4015b
CustomerId: ff4c0714-0ead-4919-afdf-39b22c978f91
OrderTotal: 0.0
CreatedDate: 06/26/2025 12:42:35
------------------------ 
2025-06-26 12:42:35.957 +00:00 [INF] Executed DbCommand (19ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderStateInstance] ([CorrelationId], [CreatedDate], [CurrentState], [CustomerId], [OrderId], [OrderTotal])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-26 12:42:35.957 +00:00 [INF] Executed DbCommand (19ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderStateInstance] ([CorrelationId], [CreatedDate], [CurrentState], [CustomerId], [OrderId], [OrderTotal])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-26 12:42:36.040 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 12:42:36.040 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 12:42:36.116 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary), @p9='?' (Size = 4000), @p10='?' (Size = 256), @p11='?' (DbType = Guid), @p12='?' (DbType = Guid), @p13='?' (Size = 256), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (Size = 256), @p17='?' (Size = 4000), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = Guid), @p22='?' (Size = 4000), @p23='?' (DbType = Guid), @p24='?' (Size = 4000), @p25='?' (DbType = Guid), @p26='?' (Size = 256), @p27='?' (DbType = DateTime2), @p28='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
INSERT INTO [OutboxMessage] ([Body], [ContentType], [ConversationId], [CorrelationId], [DestinationAddress], [EnqueueTime], [ExpirationTime], [FaultAddress], [Headers], [InboxConsumerId], [InboxMessageId], [InitiatorId], [MessageId], [MessageType], [OutboxId], [Properties], [RequestId], [ResponseAddress], [SentTime], [SourceAddress])
OUTPUT INSERTED.[SequenceNumber]
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
2025-06-26 12:42:36.146 +00:00 [INF] Executed DbCommand (51ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary), @p9='?' (Size = 4000), @p10='?' (Size = 256), @p11='?' (DbType = Guid), @p12='?' (DbType = Guid), @p13='?' (Size = 256), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (Size = 256), @p17='?' (Size = 4000), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = Guid), @p22='?' (Size = 4000), @p23='?' (DbType = Guid), @p24='?' (Size = 4000), @p25='?' (DbType = Guid), @p26='?' (Size = 256), @p27='?' (DbType = DateTime2), @p28='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
INSERT INTO [OutboxMessage] ([Body], [ContentType], [ConversationId], [CorrelationId], [DestinationAddress], [EnqueueTime], [ExpirationTime], [FaultAddress], [Headers], [InboxConsumerId], [InboxMessageId], [InitiatorId], [MessageId], [MessageType], [OutboxId], [Properties], [RequestId], [ResponseAddress], [SentTime], [SourceAddress])
OUTPUT INSERTED.[SequenceNumber]
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
2025-06-26 12:42:36.290 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 12:42:36.302 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 12:42:36.370 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 12:42:36.375 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 12:42:36.405 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 12:42:36.433 +00:00 [INF] Executed DbCommand (48ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 12:42:36.488 +00:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2025-06-26 12:42:36.546 +00:00 [INF] Executed DbCommand (72ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2025-06-26 12:42:36.692 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 12:42:36.698 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 12:42:36.709 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 12:42:36.767 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 12:42:36.862 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 12:42:36.863 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 12:42:36.912 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 12:42:36.912 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 12:42:36.964 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 12:42:36.981 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 12:42:37.023 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2025-06-26 12:42:37.056 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2025-06-26 12:42:37.073 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 12:42:37.078 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 12:42:37.114 +00:00 [INF] Executed DbCommand (10ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 12:42:37.145 +00:00 [INF] Executed DbCommand (52ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 12:42:37.224 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 12:42:37.231 +00:00 [INF] Executed DbCommand (10ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 12:42:37.279 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 12:42:37.285 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 12:42:37.334 +00:00 [INF] Executed DbCommand (17ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 12:42:37.334 +00:00 [INF] Executed DbCommand (30ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 12:42:37.400 +00:00 [INF] Executed DbCommand (9ms) [Parameters=[@__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1
2025-06-26 12:42:37.415 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1
2025-06-26 12:42:37.468 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 12:42:37.468 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 12:42:37.497 +00:00 [INF] Executed DbCommand (16ms) [Parameters=[@p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [OutboxMessage]
OUTPUT 1
WHERE [SequenceNumber] = @p0;
2025-06-26 12:42:37.551 +00:00 [INF] Executed DbCommand (49ms) [Parameters=[@p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [OutboxMessage]
OUTPUT 1
WHERE [SequenceNumber] = @p0;
2025-06-26 12:42:37.804 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 12:42:37.857 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 12:42:37.898 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int64), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = Int32), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InboxState] ([Consumed], [ConsumerId], [Delivered], [ExpirationTime], [LastSequenceNumber], [LockId], [MessageId], [ReceiveCount], [Received])
OUTPUT INSERTED.[Id], INSERTED.[RowVersion]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-06-26 12:42:37.904 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 12:42:38.069 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 12:42:38.090 +00:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int64), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = Int32), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InboxState] ([Consumed], [ConsumerId], [Delivered], [ExpirationTime], [LastSequenceNumber], [LockId], [MessageId], [ReceiveCount], [Received])
OUTPUT INSERTED.[Id], INSERTED.[RowVersion]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-06-26 12:42:38.228 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 12:42:38.280 +00:00 [INF] Executed DbCommand (30ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 12:42:38.324 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 12:42:38.330 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 12:42:38.339 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 12:42:38.349 +00:00 [INF] Executed DbCommand (9ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 12:42:38.462 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@__id='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[CorrelationId], [o].[CreatedDate], [o].[CurrentState], [o].[CustomerId], [o].[OrderId], [o].[OrderTotal]
FROM [OrderStateInstance] AS [o]
WHERE [o].[CorrelationId] = @__id
2025-06-26 12:42:38.462 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@__id='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[CorrelationId], [o].[CreatedDate], [o].[CurrentState], [o].[CustomerId], [o].[OrderId], [o].[OrderTotal]
FROM [OrderStateInstance] AS [o]
WHERE [o].[CorrelationId] = @__id
2025-06-26 12:42:38.522 +00:00 [INF] StockReservedEvent received in OrderStateMachine: CorrelationId: 923d7ad0-b705-4ff0-8ff8-b61443f9f8d0
CurrentState: StockCheck
OrderId: 060cf56f-ddbb-4312-a8c7-bd4a30f4015b
CustomerId: ff4c0714-0ead-4919-afdf-39b22c978f91
OrderTotal: 0.00
CreatedDate: 06/26/2025 12:42:35
------------------------ 
2025-06-26 12:42:38.522 +00:00 [INF] StockReservedEvent received in OrderStateMachine: CorrelationId: 4730bb86-b8bc-47b6-a9d5-5f18a04d86b4
CurrentState: StockCheck
OrderId: 060cf56f-ddbb-4312-a8c7-bd4a30f4015b
CustomerId: ff4c0714-0ead-4919-afdf-39b22c978f91
OrderTotal: 0.00
CreatedDate: 06/26/2025 12:42:35
------------------------ 
2025-06-26 12:42:38.559 +00:00 [INF] CompletePaymentMessage sent in OrderStateMachine: CorrelationId: 4730bb86-b8bc-47b6-a9d5-5f18a04d86b4
CurrentState: StockReserved
OrderId: 060cf56f-ddbb-4312-a8c7-bd4a30f4015b
CustomerId: ff4c0714-0ead-4919-afdf-39b22c978f91
OrderTotal: 0.00
CreatedDate: 06/26/2025 12:42:35
------------------------ 
2025-06-26 12:42:38.559 +00:00 [INF] CompletePaymentMessage sent in OrderStateMachine: CorrelationId: 923d7ad0-b705-4ff0-8ff8-b61443f9f8d0
CurrentState: StockReserved
OrderId: 060cf56f-ddbb-4312-a8c7-bd4a30f4015b
CustomerId: ff4c0714-0ead-4919-afdf-39b22c978f91
OrderTotal: 0.00
CreatedDate: 06/26/2025 12:42:35
------------------------ 
2025-06-26 12:42:38.597 +00:00 [INF] Executed DbCommand (19ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [OrderStateInstance] SET [CurrentState] = @p0
OUTPUT 1
WHERE [CorrelationId] = @p1;
2025-06-26 12:42:38.597 +00:00 [INF] Executed DbCommand (19ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [OrderStateInstance] SET [CurrentState] = @p0
OUTPUT 1
WHERE [CorrelationId] = @p1;
2025-06-26 12:42:38.619 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 12:42:38.619 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 12:42:38.661 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary), @p9='?' (Size = 4000), @p10='?' (Size = 256), @p11='?' (DbType = Guid), @p12='?' (DbType = Guid), @p13='?' (Size = 256), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (Size = 256), @p17='?' (Size = 4000), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = Guid), @p22='?' (Size = 4000), @p23='?' (DbType = Guid), @p24='?' (Size = 4000), @p25='?' (DbType = Guid), @p26='?' (Size = 256), @p27='?' (DbType = DateTime2), @p28='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
INSERT INTO [OutboxMessage] ([Body], [ContentType], [ConversationId], [CorrelationId], [DestinationAddress], [EnqueueTime], [ExpirationTime], [FaultAddress], [Headers], [InboxConsumerId], [InboxMessageId], [InitiatorId], [MessageId], [MessageType], [OutboxId], [Properties], [RequestId], [ResponseAddress], [SentTime], [SourceAddress])
OUTPUT INSERTED.[SequenceNumber]
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
2025-06-26 12:42:38.661 +00:00 [INF] Executed DbCommand (12ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary), @p9='?' (Size = 4000), @p10='?' (Size = 256), @p11='?' (DbType = Guid), @p12='?' (DbType = Guid), @p13='?' (Size = 256), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (Size = 256), @p17='?' (Size = 4000), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = Guid), @p22='?' (Size = 4000), @p23='?' (DbType = Guid), @p24='?' (Size = 4000), @p25='?' (DbType = Guid), @p26='?' (Size = 256), @p27='?' (DbType = DateTime2), @p28='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
INSERT INTO [OutboxMessage] ([Body], [ContentType], [ConversationId], [CorrelationId], [DestinationAddress], [EnqueueTime], [ExpirationTime], [FaultAddress], [Headers], [InboxConsumerId], [InboxMessageId], [InitiatorId], [MessageId], [MessageType], [OutboxId], [Properties], [RequestId], [ResponseAddress], [SentTime], [SourceAddress])
OUTPUT INSERTED.[SequenceNumber]
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
2025-06-26 12:42:38.747 +00:00 [INF] Executed DbCommand (17ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 12:42:38.774 +00:00 [INF] Executed DbCommand (44ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 12:42:38.838 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 12:42:38.864 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 12:42:38.871 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 12:42:38.898 +00:00 [INF] Executed DbCommand (27ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 12:42:38.938 +00:00 [INF] Executed DbCommand (27ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2025-06-26 12:42:38.990 +00:00 [INF] Executed DbCommand (45ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2025-06-26 12:42:39.103 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 12:42:39.116 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 12:42:39.128 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 12:42:39.167 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 12:42:39.225 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 12:42:39.340 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 12:42:39.424 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 12:42:39.460 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 12:42:39.517 +00:00 [INF] Executed DbCommand (47ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2025-06-26 12:42:39.562 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 12:42:39.621 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 12:42:39.660 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 12:42:39.675 +00:00 [INF] Executed DbCommand (10ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 12:42:39.758 +00:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2025-06-26 12:42:39.808 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 12:42:39.961 +00:00 [INF] Executed DbCommand (40ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 12:42:39.971 +00:00 [INF] Executed DbCommand (32ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 12:42:40.041 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 12:42:40.056 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 12:42:40.121 +00:00 [INF] Executed DbCommand (29ms) [Parameters=[@__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1
2025-06-26 12:42:40.163 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 12:42:40.236 +00:00 [INF] Executed DbCommand (18ms) [Parameters=[@p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [OutboxMessage]
OUTPUT 1
WHERE [SequenceNumber] = @p0;
2025-06-26 12:42:40.250 +00:00 [INF] Executed DbCommand (87ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 12:42:40.374 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 12:42:40.404 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 12:42:40.463 +00:00 [INF] Executed DbCommand (45ms) [Parameters=[@__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1
2025-06-26 12:42:40.492 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 12:42:40.502 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [OutboxMessage]
OUTPUT 1
WHERE [SequenceNumber] = @p0;
2025-06-26 12:42:45.732 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:42:55.782 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:43:05.794 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:43:15.865 +00:00 [INF] Executed DbCommand (19ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:43:15.919 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int64), @p1='?' (Size = 8) (DbType = Binary), @p2='?' (DbType = Int64), @p3='?' (Size = 8) (DbType = Binary), @p4='?' (DbType = Int64), @p5='?' (Size = 8) (DbType = Binary), @p6='?' (DbType = Int64), @p7='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [InboxState]
OUTPUT 1
WHERE [Id] = @p0 AND [RowVersion] = @p1;
DELETE FROM [InboxState]
OUTPUT 1
WHERE [Id] = @p2 AND [RowVersion] = @p3;
DELETE FROM [InboxState]
OUTPUT 1
WHERE [Id] = @p4 AND [RowVersion] = @p5;
DELETE FROM [InboxState]
OUTPUT 1
WHERE [Id] = @p6 AND [RowVersion] = @p7;
2025-06-26 12:43:15.983 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:43:26.010 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:43:36.025 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:43:46.062 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:43:56.094 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:44:06.125 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:44:16.176 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:44:26.190 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:44:36.220 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:44:46.255 +00:00 [INF] Executed DbCommand (26ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:44:56.286 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:45:06.303 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:45:16.376 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:45:26.385 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:45:36.415 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:45:46.490 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:45:56.544 +00:00 [INF] Executed DbCommand (28ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:46:06.561 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:46:16.611 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:46:26.665 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:46:36.701 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:46:46.710 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:46:56.751 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:47:06.762 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:47:16.791 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:47:26.826 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:47:36.858 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:47:46.867 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:47:56.876 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:48:06.912 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:48:16.919 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:48:26.950 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:48:36.981 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:48:46.991 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:48:57.003 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 12:49:07.031 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:13:10.172 +00:00 [WRN] No store type was specified for the decimal property 'OrderTotal' on entity type 'OrderStateInstance'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-06-26 13:13:12.629 +00:00 [INF] Executed DbCommand (90ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-26 13:13:12.691 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-26 13:13:12.709 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-26 13:13:12.755 +00:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-26 13:13:12.856 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-26 13:13:12.897 +00:00 [INF] No migrations were applied. The database is already up to date.
2025-06-26 13:13:14.409 +00:00 [INF] Configured endpoint create-order-message-queue, Saga: SagaOrchestration.StateInstances.OrderStateInstance, State Machine: SagaOrchestration.StateMachines.OrderStateMachine
2025-06-26 13:13:15.978 +00:00 [INF] Now listening on: http://[::]:8080
2025-06-26 13:13:15.995 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-26 13:13:16.000 +00:00 [INF] Hosting environment: Development
2025-06-26 13:13:16.007 +00:00 [INF] Content root path: /app
2025-06-26 13:13:16.338 +00:00 [INF] Bus started: "rabbitmq://rabbitmq/"
2025-06-26 13:13:28.017 +00:00 [INF] Executed DbCommand (513ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:13:38.174 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:13:48.226 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:13:58.245 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:14:08.283 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:14:18.320 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:14:28.396 +00:00 [INF] Executed DbCommand (26ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:14:38.431 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:14:48.460 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:14:58.469 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:15:08.481 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:15:18.520 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:15:28.559 +00:00 [INF] Executed DbCommand (26ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:15:38.574 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:15:48.607 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:15:58.642 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:16:08.743 +00:00 [INF] Executed DbCommand (44ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:16:18.798 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:16:28.850 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:16:38.919 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:16:48.925 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:16:59.001 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:17:09.073 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:17:19.143 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:17:27.182 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:17:27.210 +00:00 [INF] Executed DbCommand (27ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:17:27.605 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:17:27.626 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:17:27.683 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int64), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = Int32), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InboxState] ([Consumed], [ConsumerId], [Delivered], [ExpirationTime], [LastSequenceNumber], [LockId], [MessageId], [ReceiveCount], [Received])
OUTPUT INSERTED.[Id], INSERTED.[RowVersion]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-06-26 13:17:27.691 +00:00 [INF] Executed DbCommand (34ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int64), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = Int32), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InboxState] ([Consumed], [ConsumerId], [Delivered], [ExpirationTime], [LastSequenceNumber], [LockId], [MessageId], [ReceiveCount], [Received])
OUTPUT INSERTED.[Id], INSERTED.[RowVersion]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-06-26 13:17:27.894 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:17:27.895 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:17:27.941 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:17:27.941 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:17:27.992 +00:00 [INF] Executed DbCommand (16ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:17:28.020 +00:00 [INF] Executed DbCommand (37ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:17:28.216 +00:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[CorrelationId], [o].[CreatedDate], [o].[CurrentState], [o].[CustomerId], [o].[OrderId], [o].[OrderTotal]
FROM [OrderStateInstance] AS [o]
WHERE [o].[OrderId] = '61cd26f0-0821-4941-8f12-2ddada370a61'
2025-06-26 13:17:28.246 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[CorrelationId], [o].[CreatedDate], [o].[CurrentState], [o].[CustomerId], [o].[OrderId], [o].[OrderTotal]
FROM [OrderStateInstance] AS [o]
WHERE [o].[OrderId] = '61cd26f0-0821-4941-8f12-2ddada370a61'
2025-06-26 13:17:28.374 +00:00 [INF] CreateOrderMessage received in OrderStateMachine: CorrelationId: cf9545c1-19fa-4067-a2aa-cab97c1a2cf0
CurrentState: Initial
OrderId: 00000000-0000-0000-0000-000000000000
CustomerId: 00000000-0000-0000-0000-000000000000
OrderTotal: 0
CreatedDate: 01/01/0001 00:00:00
------------------------ 
2025-06-26 13:17:28.374 +00:00 [INF] CreateOrderMessage received in OrderStateMachine: CorrelationId: 772a5c2f-6fb8-468b-be79-d40b01efaee5
CurrentState: Initial
OrderId: 00000000-0000-0000-0000-000000000000
CustomerId: 00000000-0000-0000-0000-000000000000
OrderTotal: 0
CreatedDate: 01/01/0001 00:00:00
------------------------ 
2025-06-26 13:17:35.706 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:17:35.894 +00:00 [INF] CheckBookStockCommand published in OrderStateMachine: CorrelationId: 772a5c2f-6fb8-468b-be79-d40b01efaee5
CurrentState: StockCheck
OrderId: 61cd26f0-0821-4941-8f12-2ddada370a61
CustomerId: 89228036-cc34-4a5f-9c4c-7755f16f967a
OrderTotal: 0.0
CreatedDate: 06/26/2025 13:17:35
------------------------ 
2025-06-26 13:17:35.894 +00:00 [INF] CheckBookStockCommand published in OrderStateMachine: CorrelationId: cf9545c1-19fa-4067-a2aa-cab97c1a2cf0
CurrentState: StockCheck
OrderId: 61cd26f0-0821-4941-8f12-2ddada370a61
CustomerId: 89228036-cc34-4a5f-9c4c-7755f16f967a
OrderTotal: 0.0
CreatedDate: 06/26/2025 13:17:35
------------------------ 
2025-06-26 13:17:35.966 +00:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderStateInstance] ([CorrelationId], [CreatedDate], [CurrentState], [CustomerId], [OrderId], [OrderTotal])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-26 13:17:35.971 +00:00 [INF] Executed DbCommand (34ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderStateInstance] ([CorrelationId], [CreatedDate], [CurrentState], [CustomerId], [OrderId], [OrderTotal])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-26 13:17:36.010 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:17:36.010 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:17:36.067 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary), @p9='?' (Size = 4000), @p10='?' (Size = 256), @p11='?' (DbType = Guid), @p12='?' (DbType = Guid), @p13='?' (Size = 256), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (Size = 256), @p17='?' (Size = 4000), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = Guid), @p22='?' (Size = 4000), @p23='?' (DbType = Guid), @p24='?' (Size = 4000), @p25='?' (DbType = Guid), @p26='?' (Size = 256), @p27='?' (DbType = DateTime2), @p28='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
INSERT INTO [OutboxMessage] ([Body], [ContentType], [ConversationId], [CorrelationId], [DestinationAddress], [EnqueueTime], [ExpirationTime], [FaultAddress], [Headers], [InboxConsumerId], [InboxMessageId], [InitiatorId], [MessageId], [MessageType], [OutboxId], [Properties], [RequestId], [ResponseAddress], [SentTime], [SourceAddress])
OUTPUT INSERTED.[SequenceNumber]
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
2025-06-26 13:17:36.067 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary), @p9='?' (Size = 4000), @p10='?' (Size = 256), @p11='?' (DbType = Guid), @p12='?' (DbType = Guid), @p13='?' (Size = 256), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (Size = 256), @p17='?' (Size = 4000), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = Guid), @p22='?' (Size = 4000), @p23='?' (DbType = Guid), @p24='?' (Size = 4000), @p25='?' (DbType = Guid), @p26='?' (Size = 256), @p27='?' (DbType = DateTime2), @p28='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
INSERT INTO [OutboxMessage] ([Body], [ContentType], [ConversationId], [CorrelationId], [DestinationAddress], [EnqueueTime], [ExpirationTime], [FaultAddress], [Headers], [InboxConsumerId], [InboxMessageId], [InitiatorId], [MessageId], [MessageType], [OutboxId], [Properties], [RequestId], [ResponseAddress], [SentTime], [SourceAddress])
OUTPUT INSERTED.[SequenceNumber]
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
2025-06-26 13:17:36.101 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:17:36.100 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:17:36.112 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:17:36.137 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:17:36.164 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:17:36.171 +00:00 [INF] Executed DbCommand (28ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:17:36.238 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2025-06-26 13:17:36.238 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2025-06-26 13:17:36.375 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:17:36.375 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:17:36.386 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:17:36.412 +00:00 [INF] Executed DbCommand (27ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:17:36.515 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:17:36.543 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:17:36.573 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:17:36.573 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:17:36.606 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:17:36.614 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2025-06-26 13:17:36.667 +00:00 [INF] Executed DbCommand (32ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:17:36.675 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:17:36.682 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2025-06-26 13:17:36.689 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:17:36.715 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:17:36.765 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:17:36.836 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:17:36.836 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:17:36.922 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:17:36.926 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:17:36.934 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:17:36.962 +00:00 [INF] Executed DbCommand (29ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:17:37.048 +00:00 [INF] Executed DbCommand (27ms) [Parameters=[@__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1
2025-06-26 13:17:37.123 +00:00 [INF] Executed DbCommand (81ms) [Parameters=[@__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1
2025-06-26 13:17:37.126 +00:00 [INF] Executed DbCommand (75ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:17:37.155 +00:00 [INF] Executed DbCommand (127ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:17:37.271 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:17:37.272 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:17:37.328 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int64), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = Int32), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InboxState] ([Consumed], [ConsumerId], [Delivered], [ExpirationTime], [LastSequenceNumber], [LockId], [MessageId], [ReceiveCount], [Received])
OUTPUT INSERTED.[Id], INSERTED.[RowVersion]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-06-26 13:17:37.376 +00:00 [INF] Executed DbCommand (28ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int64), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = Int32), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InboxState] ([Consumed], [ConsumerId], [Delivered], [ExpirationTime], [LastSequenceNumber], [LockId], [MessageId], [ReceiveCount], [Received])
OUTPUT INSERTED.[Id], INSERTED.[RowVersion]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-06-26 13:17:37.523 +00:00 [INF] Executed DbCommand (26ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:17:37.550 +00:00 [INF] Executed DbCommand (26ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:17:37.556 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:17:37.556 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:17:37.582 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:17:37.582 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:17:37.616 +00:00 [INF] Executed DbCommand (27ms) [Parameters=[@p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [OutboxMessage]
OUTPUT 1
WHERE [SequenceNumber] = @p0;
2025-06-26 13:17:37.624 +00:00 [INF] Executed DbCommand (34ms) [Parameters=[@p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [OutboxMessage]
OUTPUT 1
WHERE [SequenceNumber] = @p0;
2025-06-26 13:17:37.657 +00:00 [INF] Executed DbCommand (41ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:17:37.657 +00:00 [INF] Executed DbCommand (41ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:17:37.774 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__id='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[CorrelationId], [o].[CreatedDate], [o].[CurrentState], [o].[CustomerId], [o].[OrderId], [o].[OrderTotal]
FROM [OrderStateInstance] AS [o]
WHERE [o].[CorrelationId] = @__id
2025-06-26 13:17:37.778 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@__id='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[CorrelationId], [o].[CreatedDate], [o].[CurrentState], [o].[CustomerId], [o].[OrderId], [o].[OrderTotal]
FROM [OrderStateInstance] AS [o]
WHERE [o].[CorrelationId] = @__id
2025-06-26 13:17:37.840 +00:00 [INF] StockReservedEvent received in OrderStateMachine: CorrelationId: cf9545c1-19fa-4067-a2aa-cab97c1a2cf0
CurrentState: StockCheck
OrderId: 61cd26f0-0821-4941-8f12-2ddada370a61
CustomerId: 89228036-cc34-4a5f-9c4c-7755f16f967a
OrderTotal: 0.00
CreatedDate: 06/26/2025 13:17:35
------------------------ 
2025-06-26 13:17:37.840 +00:00 [INF] StockReservedEvent received in OrderStateMachine: CorrelationId: 772a5c2f-6fb8-468b-be79-d40b01efaee5
CurrentState: StockCheck
OrderId: 61cd26f0-0821-4941-8f12-2ddada370a61
CustomerId: 89228036-cc34-4a5f-9c4c-7755f16f967a
OrderTotal: 0.00
CreatedDate: 06/26/2025 13:17:35
------------------------ 
2025-06-26 13:17:37.891 +00:00 [INF] CompletePaymentMessage sent in OrderStateMachine: CorrelationId: cf9545c1-19fa-4067-a2aa-cab97c1a2cf0
CurrentState: StockReserved
OrderId: 61cd26f0-0821-4941-8f12-2ddada370a61
CustomerId: 89228036-cc34-4a5f-9c4c-7755f16f967a
OrderTotal: 0.00
CreatedDate: 06/26/2025 13:17:35
------------------------ 
2025-06-26 13:17:37.891 +00:00 [INF] CompletePaymentMessage sent in OrderStateMachine: CorrelationId: 772a5c2f-6fb8-468b-be79-d40b01efaee5
CurrentState: StockReserved
OrderId: 61cd26f0-0821-4941-8f12-2ddada370a61
CustomerId: 89228036-cc34-4a5f-9c4c-7755f16f967a
OrderTotal: 0.00
CreatedDate: 06/26/2025 13:17:35
------------------------ 
2025-06-26 13:17:37.915 +00:00 [INF] Executed DbCommand (8ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [OrderStateInstance] SET [CurrentState] = @p0
OUTPUT 1
WHERE [CorrelationId] = @p1;
2025-06-26 13:17:37.915 +00:00 [INF] Executed DbCommand (8ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [OrderStateInstance] SET [CurrentState] = @p0
OUTPUT 1
WHERE [CorrelationId] = @p1;
2025-06-26 13:17:37.935 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:17:37.944 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:17:37.972 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary), @p9='?' (Size = 4000), @p10='?' (Size = 256), @p11='?' (DbType = Guid), @p12='?' (DbType = Guid), @p13='?' (Size = 256), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (Size = 256), @p17='?' (Size = 4000), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = Guid), @p22='?' (Size = 4000), @p23='?' (DbType = Guid), @p24='?' (Size = 4000), @p25='?' (DbType = Guid), @p26='?' (Size = 256), @p27='?' (DbType = DateTime2), @p28='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
INSERT INTO [OutboxMessage] ([Body], [ContentType], [ConversationId], [CorrelationId], [DestinationAddress], [EnqueueTime], [ExpirationTime], [FaultAddress], [Headers], [InboxConsumerId], [InboxMessageId], [InitiatorId], [MessageId], [MessageType], [OutboxId], [Properties], [RequestId], [ResponseAddress], [SentTime], [SourceAddress])
OUTPUT INSERTED.[SequenceNumber]
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
2025-06-26 13:17:37.998 +00:00 [INF] Executed DbCommand (27ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary), @p9='?' (Size = 4000), @p10='?' (Size = 256), @p11='?' (DbType = Guid), @p12='?' (DbType = Guid), @p13='?' (Size = 256), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (Size = 256), @p17='?' (Size = 4000), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = Guid), @p22='?' (Size = 4000), @p23='?' (DbType = Guid), @p24='?' (Size = 4000), @p25='?' (DbType = Guid), @p26='?' (Size = 256), @p27='?' (DbType = DateTime2), @p28='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
INSERT INTO [OutboxMessage] ([Body], [ContentType], [ConversationId], [CorrelationId], [DestinationAddress], [EnqueueTime], [ExpirationTime], [FaultAddress], [Headers], [InboxConsumerId], [InboxMessageId], [InitiatorId], [MessageId], [MessageType], [OutboxId], [Properties], [RequestId], [ResponseAddress], [SentTime], [SourceAddress])
OUTPUT INSERTED.[SequenceNumber]
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
2025-06-26 13:17:38.063 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:17:38.091 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:17:38.119 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:17:38.169 +00:00 [INF] Executed DbCommand (50ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:17:38.173 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:17:38.205 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:17:38.237 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2025-06-26 13:17:38.288 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2025-06-26 13:17:38.367 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:17:38.372 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:17:38.378 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:17:38.383 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:17:38.468 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:17:38.537 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:17:38.553 +00:00 [INF] Executed DbCommand (16ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:17:38.553 +00:00 [INF] Executed DbCommand (11ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:17:38.608 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:17:38.635 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2025-06-26 13:17:38.639 +00:00 [INF] Executed DbCommand (28ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:17:38.648 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:17:38.660 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:17:38.660 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2025-06-26 13:17:38.672 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:17:38.701 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:17:38.734 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:17:38.745 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:17:38.754 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:17:38.779 +00:00 [INF] Executed DbCommand (29ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:17:38.803 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:17:38.809 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[@__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1
2025-06-26 13:17:38.841 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:17:38.865 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:17:38.874 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [OutboxMessage]
OUTPUT 1
WHERE [SequenceNumber] = @p0;
2025-06-26 13:17:38.874 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1
2025-06-26 13:17:38.991 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:17:39.041 +00:00 [INF] Executed DbCommand (22ms) [Parameters=[@p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [OutboxMessage]
OUTPUT 1
WHERE [SequenceNumber] = @p0;
2025-06-26 13:17:45.767 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:17:55.816 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:18:05.824 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:18:15.833 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:18:15.899 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int64), @p1='?' (Size = 8) (DbType = Binary), @p2='?' (DbType = Int64), @p3='?' (Size = 8) (DbType = Binary), @p4='?' (DbType = Int64), @p5='?' (Size = 8) (DbType = Binary), @p6='?' (DbType = Int64), @p7='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [InboxState]
OUTPUT 1
WHERE [Id] = @p0 AND [RowVersion] = @p1;
DELETE FROM [InboxState]
OUTPUT 1
WHERE [Id] = @p2 AND [RowVersion] = @p3;
DELETE FROM [InboxState]
OUTPUT 1
WHERE [Id] = @p4 AND [RowVersion] = @p5;
DELETE FROM [InboxState]
OUTPUT 1
WHERE [Id] = @p6 AND [RowVersion] = @p7;
2025-06-26 13:18:15.916 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:18:25.927 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:18:35.952 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:18:45.959 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:18:55.977 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:19:05.985 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:19:15.995 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:19:26.006 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:19:36.019 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:19:46.028 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:19:56.034 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:20:06.085 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:20:16.114 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:20:26.119 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:20:36.150 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:20:46.200 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:20:56.230 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:21:06.258 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:21:16.312 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:21:26.327 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:21:36.354 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:21:46.363 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:21:56.378 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:22:06.390 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:22:16.406 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:22:26.437 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:22:36.447 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:22:46.486 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:22:56.494 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:23:06.497 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:23:16.503 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:23:26.530 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:23:36.540 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:23:46.552 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:23:56.588 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:24:06.621 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:24:16.651 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:24:26.658 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:24:36.664 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:24:46.670 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:24:56.696 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:25:06.705 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:25:16.720 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:25:26.731 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:25:36.763 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:25:46.770 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:25:56.820 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:26:06.854 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:26:16.860 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:26:26.867 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:26:36.874 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:26:46.886 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:28:34.825 +00:00 [WRN] No store type was specified for the decimal property 'OrderTotal' on entity type 'OrderStateInstance'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-06-26 13:28:36.503 +00:00 [INF] Executed DbCommand (71ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-26 13:28:36.551 +00:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-26 13:28:36.582 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-26 13:28:36.614 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-26 13:28:36.651 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-26 13:28:36.683 +00:00 [INF] No migrations were applied. The database is already up to date.
2025-06-26 13:28:37.553 +00:00 [INF] Configured endpoint create-order-message-queue, Saga: SagaOrchestration.StateInstances.OrderStateInstance, State Machine: SagaOrchestration.StateMachines.OrderStateMachine
2025-06-26 13:28:38.774 +00:00 [INF] Now listening on: http://[::]:8080
2025-06-26 13:28:38.789 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-26 13:28:38.812 +00:00 [INF] Hosting environment: Development
2025-06-26 13:28:38.821 +00:00 [INF] Content root path: /app
2025-06-26 13:28:39.141 +00:00 [INF] Bus started: "rabbitmq://rabbitmq/"
2025-06-26 13:28:49.636 +00:00 [INF] Executed DbCommand (84ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:28:59.724 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:29:09.776 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:29:19.790 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:29:29.843 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:29:39.854 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:29:49.930 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:29:59.941 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:30:09.950 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:30:19.986 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:30:30.018 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:30:40.072 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:30:50.099 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:31:00.111 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:31:10.121 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:31:20.129 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:31:26.349 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:31:26.381 +00:00 [INF] Executed DbCommand (11ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:31:26.640 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:31:26.640 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:31:26.661 +00:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int64), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = Int32), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InboxState] ([Consumed], [ConsumerId], [Delivered], [ExpirationTime], [LastSequenceNumber], [LockId], [MessageId], [ReceiveCount], [Received])
OUTPUT INSERTED.[Id], INSERTED.[RowVersion]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-06-26 13:31:26.683 +00:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int64), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = Int32), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InboxState] ([Consumed], [ConsumerId], [Delivered], [ExpirationTime], [LastSequenceNumber], [LockId], [MessageId], [ReceiveCount], [Received])
OUTPUT INSERTED.[Id], INSERTED.[RowVersion]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-06-26 13:31:26.899 +00:00 [INF] Executed DbCommand (26ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:31:26.929 +00:00 [INF] Executed DbCommand (49ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:31:26.952 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:31:26.952 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:31:26.991 +00:00 [INF] Executed DbCommand (8ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:31:27.017 +00:00 [INF] Executed DbCommand (13ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:31:27.141 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[CorrelationId], [o].[CreatedDate], [o].[CurrentState], [o].[CustomerId], [o].[OrderId], [o].[OrderTotal]
FROM [OrderStateInstance] AS [o]
WHERE [o].[OrderId] = '4c7d157e-8258-49ec-89e0-a7c50f06e31a'
2025-06-26 13:31:27.203 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[CorrelationId], [o].[CreatedDate], [o].[CurrentState], [o].[CustomerId], [o].[OrderId], [o].[OrderTotal]
FROM [OrderStateInstance] AS [o]
WHERE [o].[OrderId] = '4c7d157e-8258-49ec-89e0-a7c50f06e31a'
2025-06-26 13:31:27.261 +00:00 [INF] CreateOrderMessage received in OrderStateMachine: CorrelationId: cfc4aa63-1d1d-472b-b446-7864d8f38dd3
CurrentState: Initial
OrderId: 00000000-0000-0000-0000-000000000000
CustomerId: 00000000-0000-0000-0000-000000000000
OrderTotal: 0
CreatedDate: 01/01/0001 00:00:00
------------------------ 
2025-06-26 13:31:27.261 +00:00 [INF] CreateOrderMessage received in OrderStateMachine: CorrelationId: c0c01d36-ded1-4b79-8d43-b6728891490c
CurrentState: Initial
OrderId: 00000000-0000-0000-0000-000000000000
CustomerId: 00000000-0000-0000-0000-000000000000
OrderTotal: 0
CreatedDate: 01/01/0001 00:00:00
------------------------ 
2025-06-26 13:31:35.555 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:31:35.719 +00:00 [INF] CheckBookStockCommand published in OrderStateMachine: CorrelationId: c0c01d36-ded1-4b79-8d43-b6728891490c
CurrentState: StockCheck
OrderId: 4c7d157e-8258-49ec-89e0-a7c50f06e31a
CustomerId: 384bcd03-34c6-45cc-9d54-843be3a22212
OrderTotal: 0.0
CreatedDate: 06/26/2025 13:31:35
------------------------ 
2025-06-26 13:31:35.741 +00:00 [INF] CheckBookStockCommand published in OrderStateMachine: CorrelationId: cfc4aa63-1d1d-472b-b446-7864d8f38dd3
CurrentState: StockCheck
OrderId: 4c7d157e-8258-49ec-89e0-a7c50f06e31a
CustomerId: 384bcd03-34c6-45cc-9d54-843be3a22212
OrderTotal: 0.0
CreatedDate: 06/26/2025 13:31:35
------------------------ 
2025-06-26 13:31:35.781 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderStateInstance] ([CorrelationId], [CreatedDate], [CurrentState], [CustomerId], [OrderId], [OrderTotal])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-26 13:31:35.811 +00:00 [INF] Executed DbCommand (17ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderStateInstance] ([CorrelationId], [CreatedDate], [CurrentState], [CustomerId], [OrderId], [OrderTotal])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-26 13:31:35.844 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:31:35.844 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:31:35.921 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary), @p9='?' (Size = 4000), @p10='?' (Size = 256), @p11='?' (DbType = Guid), @p12='?' (DbType = Guid), @p13='?' (Size = 256), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (Size = 256), @p17='?' (Size = 4000), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = Guid), @p22='?' (Size = 4000), @p23='?' (DbType = Guid), @p24='?' (Size = 4000), @p25='?' (DbType = Guid), @p26='?' (Size = 256), @p27='?' (DbType = DateTime2), @p28='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
INSERT INTO [OutboxMessage] ([Body], [ContentType], [ConversationId], [CorrelationId], [DestinationAddress], [EnqueueTime], [ExpirationTime], [FaultAddress], [Headers], [InboxConsumerId], [InboxMessageId], [InitiatorId], [MessageId], [MessageType], [OutboxId], [Properties], [RequestId], [ResponseAddress], [SentTime], [SourceAddress])
OUTPUT INSERTED.[SequenceNumber]
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
2025-06-26 13:31:35.921 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary), @p9='?' (Size = 4000), @p10='?' (Size = 256), @p11='?' (DbType = Guid), @p12='?' (DbType = Guid), @p13='?' (Size = 256), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (Size = 256), @p17='?' (Size = 4000), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = Guid), @p22='?' (Size = 4000), @p23='?' (DbType = Guid), @p24='?' (Size = 4000), @p25='?' (DbType = Guid), @p26='?' (Size = 256), @p27='?' (DbType = DateTime2), @p28='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
INSERT INTO [OutboxMessage] ([Body], [ContentType], [ConversationId], [CorrelationId], [DestinationAddress], [EnqueueTime], [ExpirationTime], [FaultAddress], [Headers], [InboxConsumerId], [InboxMessageId], [InitiatorId], [MessageId], [MessageType], [OutboxId], [Properties], [RequestId], [ResponseAddress], [SentTime], [SourceAddress])
OUTPUT INSERTED.[SequenceNumber]
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
2025-06-26 13:31:35.995 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:31:35.995 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:31:36.023 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:31:36.026 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:31:36.036 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:31:36.085 +00:00 [INF] Executed DbCommand (49ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:31:36.153 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2025-06-26 13:31:36.178 +00:00 [INF] Executed DbCommand (50ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2025-06-26 13:31:36.334 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:31:36.334 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:31:36.365 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:31:36.365 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:31:36.477 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:31:36.477 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:31:36.528 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:31:36.552 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:31:36.581 +00:00 [INF] Executed DbCommand (8ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:31:36.628 +00:00 [INF] Executed DbCommand (49ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:31:36.700 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2025-06-26 13:31:36.700 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2025-06-26 13:31:36.715 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:31:36.715 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:31:36.749 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:31:36.778 +00:00 [INF] Executed DbCommand (28ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:31:36.846 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:31:36.846 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:31:36.876 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:31:36.880 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:31:36.908 +00:00 [INF] Executed DbCommand (27ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:31:36.914 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:31:37.039 +00:00 [INF] Executed DbCommand (56ms) [Parameters=[@__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1
2025-06-26 13:31:37.062 +00:00 [INF] Executed DbCommand (105ms) [Parameters=[@__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1
2025-06-26 13:31:37.093 +00:00 [INF] Executed DbCommand (93ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:31:37.141 +00:00 [INF] Executed DbCommand (163ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:31:37.245 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:31:37.248 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:31:37.297 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int64), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = Int32), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InboxState] ([Consumed], [ConsumerId], [Delivered], [ExpirationTime], [LastSequenceNumber], [LockId], [MessageId], [ReceiveCount], [Received])
OUTPUT INSERTED.[Id], INSERTED.[RowVersion]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-06-26 13:31:37.298 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int64), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = Int32), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InboxState] ([Consumed], [ConsumerId], [Delivered], [ExpirationTime], [LastSequenceNumber], [LockId], [MessageId], [ReceiveCount], [Received])
OUTPUT INSERTED.[Id], INSERTED.[RowVersion]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-06-26 13:31:37.485 +00:00 [INF] Executed DbCommand (88ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:31:37.511 +00:00 [INF] Executed DbCommand (49ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:31:37.516 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:31:37.518 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:31:37.518 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:31:37.534 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:31:37.541 +00:00 [INF] Executed DbCommand (16ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:31:37.547 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:31:37.572 +00:00 [INF] Executed DbCommand (37ms) [Parameters=[@p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [OutboxMessage]
OUTPUT 1
WHERE [SequenceNumber] = @p0;
2025-06-26 13:31:37.596 +00:00 [INF] Executed DbCommand (57ms) [Parameters=[@p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [OutboxMessage]
OUTPUT 1
WHERE [SequenceNumber] = @p0;
2025-06-26 13:31:37.770 +00:00 [INF] Executed DbCommand (44ms) [Parameters=[@__id='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[CorrelationId], [o].[CreatedDate], [o].[CurrentState], [o].[CustomerId], [o].[OrderId], [o].[OrderTotal]
FROM [OrderStateInstance] AS [o]
WHERE [o].[CorrelationId] = @__id
2025-06-26 13:31:37.770 +00:00 [INF] Executed DbCommand (44ms) [Parameters=[@__id='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[CorrelationId], [o].[CreatedDate], [o].[CurrentState], [o].[CustomerId], [o].[OrderId], [o].[OrderTotal]
FROM [OrderStateInstance] AS [o]
WHERE [o].[CorrelationId] = @__id
2025-06-26 13:31:37.813 +00:00 [INF] StockReservedEvent received in OrderStateMachine: CorrelationId: cfc4aa63-1d1d-472b-b446-7864d8f38dd3
CurrentState: StockCheck
OrderId: 4c7d157e-8258-49ec-89e0-a7c50f06e31a
CustomerId: 384bcd03-34c6-45cc-9d54-843be3a22212
OrderTotal: 0.00
CreatedDate: 06/26/2025 13:31:35
------------------------ 
2025-06-26 13:31:37.813 +00:00 [INF] StockReservedEvent received in OrderStateMachine: CorrelationId: c0c01d36-ded1-4b79-8d43-b6728891490c
CurrentState: StockCheck
OrderId: 4c7d157e-8258-49ec-89e0-a7c50f06e31a
CustomerId: 384bcd03-34c6-45cc-9d54-843be3a22212
OrderTotal: 0.00
CreatedDate: 06/26/2025 13:31:35
------------------------ 
2025-06-26 13:31:37.838 +00:00 [INF] CompletePaymentMessage sent in OrderStateMachine: CorrelationId: cfc4aa63-1d1d-472b-b446-7864d8f38dd3
CurrentState: StockReserved
OrderId: 4c7d157e-8258-49ec-89e0-a7c50f06e31a
CustomerId: 384bcd03-34c6-45cc-9d54-843be3a22212
OrderTotal: 0.00
CreatedDate: 06/26/2025 13:31:35
------------------------ 
2025-06-26 13:31:37.838 +00:00 [INF] CompletePaymentMessage sent in OrderStateMachine: CorrelationId: c0c01d36-ded1-4b79-8d43-b6728891490c
CurrentState: StockReserved
OrderId: 4c7d157e-8258-49ec-89e0-a7c50f06e31a
CustomerId: 384bcd03-34c6-45cc-9d54-843be3a22212
OrderTotal: 0.00
CreatedDate: 06/26/2025 13:31:35
------------------------ 
2025-06-26 13:31:37.858 +00:00 [INF] Executed DbCommand (8ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [OrderStateInstance] SET [CurrentState] = @p0
OUTPUT 1
WHERE [CorrelationId] = @p1;
2025-06-26 13:31:37.858 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [OrderStateInstance] SET [CurrentState] = @p0
OUTPUT 1
WHERE [CorrelationId] = @p1;
2025-06-26 13:31:37.878 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:31:37.878 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:31:37.890 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary), @p9='?' (Size = 4000), @p10='?' (Size = 256), @p11='?' (DbType = Guid), @p12='?' (DbType = Guid), @p13='?' (Size = 256), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (Size = 256), @p17='?' (Size = 4000), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = Guid), @p22='?' (Size = 4000), @p23='?' (DbType = Guid), @p24='?' (Size = 4000), @p25='?' (DbType = Guid), @p26='?' (Size = 256), @p27='?' (DbType = DateTime2), @p28='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
INSERT INTO [OutboxMessage] ([Body], [ContentType], [ConversationId], [CorrelationId], [DestinationAddress], [EnqueueTime], [ExpirationTime], [FaultAddress], [Headers], [InboxConsumerId], [InboxMessageId], [InitiatorId], [MessageId], [MessageType], [OutboxId], [Properties], [RequestId], [ResponseAddress], [SentTime], [SourceAddress])
OUTPUT INSERTED.[SequenceNumber]
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
2025-06-26 13:31:37.917 +00:00 [INF] Executed DbCommand (11ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary), @p9='?' (Size = 4000), @p10='?' (Size = 256), @p11='?' (DbType = Guid), @p12='?' (DbType = Guid), @p13='?' (Size = 256), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (Size = 256), @p17='?' (Size = 4000), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = Guid), @p22='?' (Size = 4000), @p23='?' (DbType = Guid), @p24='?' (Size = 4000), @p25='?' (DbType = Guid), @p26='?' (Size = 256), @p27='?' (DbType = DateTime2), @p28='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
INSERT INTO [OutboxMessage] ([Body], [ContentType], [ConversationId], [CorrelationId], [DestinationAddress], [EnqueueTime], [ExpirationTime], [FaultAddress], [Headers], [InboxConsumerId], [InboxMessageId], [InitiatorId], [MessageId], [MessageType], [OutboxId], [Properties], [RequestId], [ResponseAddress], [SentTime], [SourceAddress])
OUTPUT INSERTED.[SequenceNumber]
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
2025-06-26 13:31:37.959 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:31:37.959 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:31:37.990 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:31:37.990 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:31:38.021 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:31:38.031 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:31:38.067 +00:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2025-06-26 13:31:38.098 +00:00 [INF] Executed DbCommand (29ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2025-06-26 13:31:38.219 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:31:38.224 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:31:38.231 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:31:38.261 +00:00 [INF] Executed DbCommand (29ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:31:38.298 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:31:38.306 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:31:38.318 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:31:38.318 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:31:38.352 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:31:38.362 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:31:38.362 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2025-06-26 13:31:38.397 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:31:38.404 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2025-06-26 13:31:38.478 +00:00 [INF] Executed DbCommand (54ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:31:38.478 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:31:38.534 +00:00 [INF] Executed DbCommand (26ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:31:38.592 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:31:38.663 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:31:38.667 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:31:38.697 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:31:38.701 +00:00 [INF] Executed DbCommand (26ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:31:38.753 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:31:38.783 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[@__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1
2025-06-26 13:31:38.856 +00:00 [INF] Executed DbCommand (46ms) [Parameters=[@__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1
2025-06-26 13:31:38.877 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:31:38.925 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:31:38.969 +00:00 [INF] Executed DbCommand (66ms) [Parameters=[@p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [OutboxMessage]
OUTPUT 1
WHERE [SequenceNumber] = @p0;
2025-06-26 13:31:39.039 +00:00 [INF] Executed DbCommand (49ms) [Parameters=[@p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [OutboxMessage]
OUTPUT 1
WHERE [SequenceNumber] = @p0;
2025-06-26 13:31:45.607 +00:00 [INF] Executed DbCommand (44ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:31:55.635 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:32:05.666 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:32:15.675 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:32:15.692 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int64), @p1='?' (Size = 8) (DbType = Binary), @p2='?' (DbType = Int64), @p3='?' (Size = 8) (DbType = Binary), @p4='?' (DbType = Int64), @p5='?' (Size = 8) (DbType = Binary), @p6='?' (DbType = Int64), @p7='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [InboxState]
OUTPUT 1
WHERE [Id] = @p0 AND [RowVersion] = @p1;
DELETE FROM [InboxState]
OUTPUT 1
WHERE [Id] = @p2 AND [RowVersion] = @p3;
DELETE FROM [InboxState]
OUTPUT 1
WHERE [Id] = @p4 AND [RowVersion] = @p5;
DELETE FROM [InboxState]
OUTPUT 1
WHERE [Id] = @p6 AND [RowVersion] = @p7;
2025-06-26 13:32:15.730 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:32:25.743 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:32:35.795 +00:00 [INF] Executed DbCommand (45ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:32:45.851 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:32:55.860 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:33:05.868 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:33:15.875 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:33:25.885 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:33:35.911 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:33:45.945 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:33:55.976 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:34:05.992 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:34:16.044 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:34:26.059 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:34:36.091 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:34:46.118 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:34:56.147 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:35:06.181 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:35:16.216 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:35:26.226 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:35:36.249 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:35:46.278 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:35:56.310 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:36:06.339 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:36:16.358 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:36:26.367 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:36:36.377 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:36:46.412 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:36:56.448 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:37:06.477 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:38:37.351 +00:00 [WRN] No store type was specified for the decimal property 'OrderTotal' on entity type 'OrderStateInstance'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-06-26 13:38:39.128 +00:00 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-26 13:38:39.179 +00:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-26 13:38:39.190 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-26 13:38:39.203 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-26 13:38:39.271 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-26 13:38:39.303 +00:00 [INF] No migrations were applied. The database is already up to date.
2025-06-26 13:38:40.229 +00:00 [INF] Configured endpoint create-order-message-queue, Saga: SagaOrchestration.StateInstances.OrderStateInstance, State Machine: SagaOrchestration.StateMachines.OrderStateMachine
2025-06-26 13:38:41.517 +00:00 [INF] Now listening on: http://[::]:8080
2025-06-26 13:38:41.528 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-26 13:38:41.538 +00:00 [INF] Hosting environment: Development
2025-06-26 13:38:41.544 +00:00 [INF] Content root path: /app
2025-06-26 13:38:42.012 +00:00 [INF] Bus started: "rabbitmq://rabbitmq/"
2025-06-26 13:38:53.001 +00:00 [INF] Executed DbCommand (379ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:39:03.252 +00:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:39:13.297 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:39:23.320 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:39:33.357 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:39:43.369 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:39:53.401 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:40:03.409 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:40:13.449 +00:00 [INF] Executed DbCommand (30ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:40:23.477 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:40:33.531 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:40:43.582 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:40:53.591 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:40:57.745 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:40:57.761 +00:00 [INF] Executed DbCommand (41ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:40:58.071 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:40:58.071 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:40:58.111 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int64), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = Int32), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InboxState] ([Consumed], [ConsumerId], [Delivered], [ExpirationTime], [LastSequenceNumber], [LockId], [MessageId], [ReceiveCount], [Received])
OUTPUT INSERTED.[Id], INSERTED.[RowVersion]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-06-26 13:40:58.159 +00:00 [INF] Executed DbCommand (72ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int64), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = Int32), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InboxState] ([Consumed], [ConsumerId], [Delivered], [ExpirationTime], [LastSequenceNumber], [LockId], [MessageId], [ReceiveCount], [Received])
OUTPUT INSERTED.[Id], INSERTED.[RowVersion]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-06-26 13:40:58.300 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:40:58.301 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:40:58.331 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:40:58.331 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:40:58.348 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:40:58.348 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:40:58.489 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[CorrelationId], [o].[CreatedDate], [o].[CurrentState], [o].[CustomerId], [o].[OrderId], [o].[OrderTotal]
FROM [OrderStateInstance] AS [o]
WHERE [o].[OrderId] = '1ba925fe-0f4e-40a1-9061-feb3e8b794ea'
2025-06-26 13:40:58.567 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[CorrelationId], [o].[CreatedDate], [o].[CurrentState], [o].[CustomerId], [o].[OrderId], [o].[OrderTotal]
FROM [OrderStateInstance] AS [o]
WHERE [o].[OrderId] = '1ba925fe-0f4e-40a1-9061-feb3e8b794ea'
2025-06-26 13:40:58.630 +00:00 [INF] CreateOrderMessage received in OrderStateMachine: CorrelationId: 8b7a993f-4a35-4f1a-be53-bb838b425934
CurrentState: Initial
OrderId: 00000000-0000-0000-0000-000000000000
CustomerId: 00000000-0000-0000-0000-000000000000
OrderTotal: 0
CreatedDate: 01/01/0001 00:00:00
------------------------ 
2025-06-26 13:40:58.630 +00:00 [INF] CreateOrderMessage received in OrderStateMachine: CorrelationId: 653a1e11-3ee1-4766-b45d-ca5e13ae96c0
CurrentState: Initial
OrderId: 00000000-0000-0000-0000-000000000000
CustomerId: 00000000-0000-0000-0000-000000000000
OrderTotal: 0
CreatedDate: 01/01/0001 00:00:00
------------------------ 
2025-06-26 13:41:02.685 +00:00 [INF] CheckBookStockCommand published in OrderStateMachine: CorrelationId: 653a1e11-3ee1-4766-b45d-ca5e13ae96c0
CurrentState: StockCheck
OrderId: 1ba925fe-0f4e-40a1-9061-feb3e8b794ea
CustomerId: 3ff89955-af8d-43af-954a-29bbfde17f13
OrderTotal: 0.0
CreatedDate: 06/26/2025 13:41:02
------------------------ 
2025-06-26 13:41:02.685 +00:00 [INF] CheckBookStockCommand published in OrderStateMachine: CorrelationId: 8b7a993f-4a35-4f1a-be53-bb838b425934
CurrentState: StockCheck
OrderId: 1ba925fe-0f4e-40a1-9061-feb3e8b794ea
CustomerId: 3ff89955-af8d-43af-954a-29bbfde17f13
OrderTotal: 0.0
CreatedDate: 06/26/2025 13:41:02
------------------------ 
2025-06-26 13:41:02.832 +00:00 [INF] Executed DbCommand (46ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderStateInstance] ([CorrelationId], [CreatedDate], [CurrentState], [CustomerId], [OrderId], [OrderTotal])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-26 13:41:02.832 +00:00 [INF] Executed DbCommand (47ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderStateInstance] ([CorrelationId], [CreatedDate], [CurrentState], [CustomerId], [OrderId], [OrderTotal])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-26 13:41:02.933 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:41:02.933 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:41:02.955 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary), @p9='?' (Size = 4000), @p10='?' (Size = 256), @p11='?' (DbType = Guid), @p12='?' (DbType = Guid), @p13='?' (Size = 256), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (Size = 256), @p17='?' (Size = 4000), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = Guid), @p22='?' (Size = 4000), @p23='?' (DbType = Guid), @p24='?' (Size = 4000), @p25='?' (DbType = Guid), @p26='?' (Size = 256), @p27='?' (DbType = DateTime2), @p28='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
INSERT INTO [OutboxMessage] ([Body], [ContentType], [ConversationId], [CorrelationId], [DestinationAddress], [EnqueueTime], [ExpirationTime], [FaultAddress], [Headers], [InboxConsumerId], [InboxMessageId], [InitiatorId], [MessageId], [MessageType], [OutboxId], [Properties], [RequestId], [ResponseAddress], [SentTime], [SourceAddress])
OUTPUT INSERTED.[SequenceNumber]
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
2025-06-26 13:41:02.955 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary), @p9='?' (Size = 4000), @p10='?' (Size = 256), @p11='?' (DbType = Guid), @p12='?' (DbType = Guid), @p13='?' (Size = 256), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (Size = 256), @p17='?' (Size = 4000), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = Guid), @p22='?' (Size = 4000), @p23='?' (DbType = Guid), @p24='?' (Size = 4000), @p25='?' (DbType = Guid), @p26='?' (Size = 256), @p27='?' (DbType = DateTime2), @p28='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
INSERT INTO [OutboxMessage] ([Body], [ContentType], [ConversationId], [CorrelationId], [DestinationAddress], [EnqueueTime], [ExpirationTime], [FaultAddress], [Headers], [InboxConsumerId], [InboxMessageId], [InitiatorId], [MessageId], [MessageType], [OutboxId], [Properties], [RequestId], [ResponseAddress], [SentTime], [SourceAddress])
OUTPUT INSERTED.[SequenceNumber]
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
2025-06-26 13:41:03.039 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:41:03.058 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:41:03.071 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:41:03.093 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:41:03.104 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:41:03.105 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:41:03.193 +00:00 [INF] Executed DbCommand (26ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2025-06-26 13:41:03.193 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2025-06-26 13:41:03.398 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:41:03.398 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:41:03.478 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:41:03.536 +00:00 [INF] Executed DbCommand (85ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:41:03.668 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:41:03.697 +00:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:41:03.749 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:41:03.749 +00:00 [INF] Executed DbCommand (87ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:41:03.798 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:41:03.798 +00:00 [INF] Executed DbCommand (31ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:41:03.901 +00:00 [INF] Executed DbCommand (9ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:41:03.973 +00:00 [INF] Executed DbCommand (67ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2025-06-26 13:41:04.010 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2025-06-26 13:41:04.045 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:41:04.045 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:41:04.102 +00:00 [INF] Executed DbCommand (46ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:41:04.101 +00:00 [INF] Executed DbCommand (47ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:41:04.309 +00:00 [INF] Executed DbCommand (46ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:41:04.338 +00:00 [INF] Executed DbCommand (75ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:41:04.338 +00:00 [INF] Executed DbCommand (29ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:41:04.372 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:41:04.393 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:41:04.459 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:41:04.463 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:41:04.463 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:41:04.490 +00:00 [INF] Executed DbCommand (32ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:41:04.514 +00:00 [INF] Executed DbCommand (26ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:41:04.585 +00:00 [INF] Executed DbCommand (26ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int64), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = Int32), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InboxState] ([Consumed], [ConsumerId], [Delivered], [ExpirationTime], [LastSequenceNumber], [LockId], [MessageId], [ReceiveCount], [Received])
OUTPUT INSERTED.[Id], INSERTED.[RowVersion]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-06-26 13:41:04.652 +00:00 [INF] Executed DbCommand (91ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int64), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = Int32), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InboxState] ([Consumed], [ConsumerId], [Delivered], [ExpirationTime], [LastSequenceNumber], [LockId], [MessageId], [ReceiveCount], [Received])
OUTPUT INSERTED.[Id], INSERTED.[RowVersion]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-06-26 13:41:04.772 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:41:04.800 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:41:04.806 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:41:04.876 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:41:04.876 +00:00 [INF] Executed DbCommand (70ms) [Parameters=[@__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1
2025-06-26 13:41:04.876 +00:00 [INF] Executed DbCommand (49ms) [Parameters=[@__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1
2025-06-26 13:41:04.914 +00:00 [INF] Executed DbCommand (97ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:41:04.959 +00:00 [INF] Executed DbCommand (50ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:41:05.066 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:41:05.066 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:41:05.096 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [OutboxMessage]
OUTPUT 1
WHERE [SequenceNumber] = @p0;
2025-06-26 13:41:05.105 +00:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [OutboxMessage]
OUTPUT 1
WHERE [SequenceNumber] = @p0;
2025-06-26 13:41:05.292 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[CorrelationId], [o].[CreatedDate], [o].[CurrentState], [o].[CustomerId], [o].[OrderId], [o].[OrderTotal]
FROM [OrderStateInstance] AS [o]
WHERE [o].[CorrelationId] = @__id
2025-06-26 13:41:05.293 +00:00 [INF] Executed DbCommand (26ms) [Parameters=[@__id='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[CorrelationId], [o].[CreatedDate], [o].[CurrentState], [o].[CustomerId], [o].[OrderId], [o].[OrderTotal]
FROM [OrderStateInstance] AS [o]
WHERE [o].[CorrelationId] = @__id
2025-06-26 13:41:05.357 +00:00 [INF] StockReservedEvent received in OrderStateMachine: CorrelationId: 653a1e11-3ee1-4766-b45d-ca5e13ae96c0
CurrentState: StockCheck
OrderId: 1ba925fe-0f4e-40a1-9061-feb3e8b794ea
CustomerId: 3ff89955-af8d-43af-954a-29bbfde17f13
OrderTotal: 0.00
CreatedDate: 06/26/2025 13:41:02
------------------------ 
2025-06-26 13:41:05.357 +00:00 [INF] StockReservedEvent received in OrderStateMachine: CorrelationId: 8b7a993f-4a35-4f1a-be53-bb838b425934
CurrentState: StockCheck
OrderId: 1ba925fe-0f4e-40a1-9061-feb3e8b794ea
CustomerId: 3ff89955-af8d-43af-954a-29bbfde17f13
OrderTotal: 0.00
CreatedDate: 06/26/2025 13:41:02
------------------------ 
2025-06-26 13:41:05.378 +00:00 [INF] CompletePaymentMessage sent in OrderStateMachine: CorrelationId: 653a1e11-3ee1-4766-b45d-ca5e13ae96c0
CurrentState: StockReserved
OrderId: 1ba925fe-0f4e-40a1-9061-feb3e8b794ea
CustomerId: 3ff89955-af8d-43af-954a-29bbfde17f13
OrderTotal: 0.00
CreatedDate: 06/26/2025 13:41:02
------------------------ 
2025-06-26 13:41:05.378 +00:00 [INF] CompletePaymentMessage sent in OrderStateMachine: CorrelationId: 8b7a993f-4a35-4f1a-be53-bb838b425934
CurrentState: StockReserved
OrderId: 1ba925fe-0f4e-40a1-9061-feb3e8b794ea
CustomerId: 3ff89955-af8d-43af-954a-29bbfde17f13
OrderTotal: 0.00
CreatedDate: 06/26/2025 13:41:02
------------------------ 
2025-06-26 13:41:05.418 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [OrderStateInstance] SET [CurrentState] = @p0
OUTPUT 1
WHERE [CorrelationId] = @p1;
2025-06-26 13:41:05.418 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [OrderStateInstance] SET [CurrentState] = @p0
OUTPUT 1
WHERE [CorrelationId] = @p1;
2025-06-26 13:41:05.432 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:41:05.432 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:41:05.468 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary), @p9='?' (Size = 4000), @p10='?' (Size = 256), @p11='?' (DbType = Guid), @p12='?' (DbType = Guid), @p13='?' (Size = 256), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (Size = 256), @p17='?' (Size = 4000), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = Guid), @p22='?' (Size = 4000), @p23='?' (DbType = Guid), @p24='?' (Size = 4000), @p25='?' (DbType = Guid), @p26='?' (Size = 256), @p27='?' (DbType = DateTime2), @p28='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
INSERT INTO [OutboxMessage] ([Body], [ContentType], [ConversationId], [CorrelationId], [DestinationAddress], [EnqueueTime], [ExpirationTime], [FaultAddress], [Headers], [InboxConsumerId], [InboxMessageId], [InitiatorId], [MessageId], [MessageType], [OutboxId], [Properties], [RequestId], [ResponseAddress], [SentTime], [SourceAddress])
OUTPUT INSERTED.[SequenceNumber]
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
2025-06-26 13:41:05.468 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary), @p9='?' (Size = 4000), @p10='?' (Size = 256), @p11='?' (DbType = Guid), @p12='?' (DbType = Guid), @p13='?' (Size = 256), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (Size = 256), @p17='?' (Size = 4000), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = Guid), @p22='?' (Size = 4000), @p23='?' (DbType = Guid), @p24='?' (Size = 4000), @p25='?' (DbType = Guid), @p26='?' (Size = 256), @p27='?' (DbType = DateTime2), @p28='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
INSERT INTO [OutboxMessage] ([Body], [ContentType], [ConversationId], [CorrelationId], [DestinationAddress], [EnqueueTime], [ExpirationTime], [FaultAddress], [Headers], [InboxConsumerId], [InboxMessageId], [InitiatorId], [MessageId], [MessageType], [OutboxId], [Properties], [RequestId], [ResponseAddress], [SentTime], [SourceAddress])
OUTPUT INSERTED.[SequenceNumber]
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
2025-06-26 13:41:05.554 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:41:05.625 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:41:05.625 +00:00 [INF] Executed DbCommand (45ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:41:05.679 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:41:05.703 +00:00 [INF] Executed DbCommand (28ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:41:05.711 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:41:05.724 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2025-06-26 13:41:05.776 +00:00 [INF] Executed DbCommand (46ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2025-06-26 13:41:05.840 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:41:05.845 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:41:05.856 +00:00 [INF] Executed DbCommand (9ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:41:05.881 +00:00 [INF] Executed DbCommand (9ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:41:06.009 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:41:06.013 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:41:06.019 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:41:06.023 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:41:06.033 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:41:06.036 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:41:06.121 +00:00 [INF] Executed DbCommand (49ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2025-06-26 13:41:06.213 +00:00 [INF] Executed DbCommand (46ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2025-06-26 13:41:06.241 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:41:06.246 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:41:06.252 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:41:06.255 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:41:06.326 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:41:06.374 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:41:06.409 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:41:06.407 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:41:06.420 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:41:06.474 +00:00 [INF] Executed DbCommand (26ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:41:06.475 +00:00 [INF] Executed DbCommand (45ms) [Parameters=[@__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1
2025-06-26 13:41:06.522 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:41:06.550 +00:00 [INF] Executed DbCommand (28ms) [Parameters=[@__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1
2025-06-26 13:41:06.559 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:41:06.580 +00:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [OutboxMessage]
OUTPUT 1
WHERE [SequenceNumber] = @p0;
2025-06-26 13:41:06.674 +00:00 [INF] Executed DbCommand (66ms) [Parameters=[@p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [OutboxMessage]
OUTPUT 1
WHERE [SequenceNumber] = @p0;
2025-06-26 13:41:13.826 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:41:23.861 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:41:33.887 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:41:43.937 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:41:43.974 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int64), @p1='?' (Size = 8) (DbType = Binary), @p2='?' (DbType = Int64), @p3='?' (Size = 8) (DbType = Binary), @p4='?' (DbType = Int64), @p5='?' (Size = 8) (DbType = Binary), @p6='?' (DbType = Int64), @p7='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [InboxState]
OUTPUT 1
WHERE [Id] = @p0 AND [RowVersion] = @p1;
DELETE FROM [InboxState]
OUTPUT 1
WHERE [Id] = @p2 AND [RowVersion] = @p3;
DELETE FROM [InboxState]
OUTPUT 1
WHERE [Id] = @p4 AND [RowVersion] = @p5;
DELETE FROM [InboxState]
OUTPUT 1
WHERE [Id] = @p6 AND [RowVersion] = @p7;
2025-06-26 13:41:44.036 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:41:54.041 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:44:59.255 +00:00 [WRN] No store type was specified for the decimal property 'OrderTotal' on entity type 'OrderStateInstance'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-06-26 13:45:00.793 +00:00 [INF] Executed DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-26 13:45:00.865 +00:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-26 13:45:00.888 +00:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-26 13:45:00.914 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-26 13:45:01.024 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-26 13:45:01.070 +00:00 [INF] No migrations were applied. The database is already up to date.
2025-06-26 13:45:01.962 +00:00 [INF] Configured endpoint create-order-message-queue, Saga: SagaOrchestration.StateInstances.OrderStateInstance, State Machine: SagaOrchestration.StateMachines.OrderStateMachine
2025-06-26 13:45:02.750 +00:00 [INF] Now listening on: http://[::]:8080
2025-06-26 13:45:02.755 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-26 13:45:02.762 +00:00 [INF] Hosting environment: Development
2025-06-26 13:45:02.769 +00:00 [INF] Content root path: /app
2025-06-26 13:45:03.079 +00:00 [INF] Bus started: "rabbitmq://rabbitmq/"
2025-06-26 13:45:13.968 +00:00 [INF] Executed DbCommand (172ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:45:24.141 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:45:34.158 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:45:44.236 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:45:54.267 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:46:04.301 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:46:14.316 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:46:24.331 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:46:34.388 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:46:38.802 +00:00 [INF] Executed DbCommand (21ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:46:38.802 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:46:39.477 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:46:39.499 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:46:39.532 +00:00 [INF] Executed DbCommand (16ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int64), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = Int32), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InboxState] ([Consumed], [ConsumerId], [Delivered], [ExpirationTime], [LastSequenceNumber], [LockId], [MessageId], [ReceiveCount], [Received])
OUTPUT INSERTED.[Id], INSERTED.[RowVersion]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-06-26 13:46:39.567 +00:00 [INF] Executed DbCommand (41ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int64), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = Int32), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InboxState] ([Consumed], [ConsumerId], [Delivered], [ExpirationTime], [LastSequenceNumber], [LockId], [MessageId], [ReceiveCount], [Received])
OUTPUT INSERTED.[Id], INSERTED.[RowVersion]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-06-26 13:46:39.803 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:46:39.824 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:46:39.919 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:46:39.942 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:46:39.991 +00:00 [INF] Executed DbCommand (28ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:46:40.002 +00:00 [INF] Executed DbCommand (12ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:46:40.290 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[CorrelationId], [o].[CreatedDate], [o].[CurrentState], [o].[CustomerId], [o].[OrderId], [o].[OrderTotal]
FROM [OrderStateInstance] AS [o]
WHERE [o].[OrderId] = 'b06a50fa-56c5-42a4-9fa7-0db0915101c8'
2025-06-26 13:46:40.322 +00:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[CorrelationId], [o].[CreatedDate], [o].[CurrentState], [o].[CustomerId], [o].[OrderId], [o].[OrderTotal]
FROM [OrderStateInstance] AS [o]
WHERE [o].[OrderId] = 'b06a50fa-56c5-42a4-9fa7-0db0915101c8'
2025-06-26 13:46:40.448 +00:00 [INF] CreateOrderMessage received in OrderStateMachine: CorrelationId: 139ef363-72c5-470b-a37d-41d5ad90e35c
CurrentState: Initial
OrderId: 00000000-0000-0000-0000-000000000000
CustomerId: 00000000-0000-0000-0000-000000000000
OrderTotal: 0
CreatedDate: 01/01/0001 00:00:00
------------------------ 
2025-06-26 13:46:40.448 +00:00 [INF] CreateOrderMessage received in OrderStateMachine: CorrelationId: f5e01618-988d-49fb-81f4-63af34847ddb
CurrentState: Initial
OrderId: 00000000-0000-0000-0000-000000000000
CustomerId: 00000000-0000-0000-0000-000000000000
OrderTotal: 0
CreatedDate: 01/01/0001 00:00:00
------------------------ 
2025-06-26 13:46:44.856 +00:00 [INF] Executed DbCommand (31ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:46:45.152 +00:00 [INF] CheckBookStockCommand published in OrderStateMachine: CorrelationId: f5e01618-988d-49fb-81f4-63af34847ddb
CurrentState: StockCheck
OrderId: b06a50fa-56c5-42a4-9fa7-0db0915101c8
CustomerId: 03f26217-4c90-4753-927b-9978451220d4
OrderTotal: 0.0
CreatedDate: 06/26/2025 13:46:44
------------------------ 
2025-06-26 13:46:45.152 +00:00 [INF] CheckBookStockCommand published in OrderStateMachine: CorrelationId: 139ef363-72c5-470b-a37d-41d5ad90e35c
CurrentState: StockCheck
OrderId: b06a50fa-56c5-42a4-9fa7-0db0915101c8
CustomerId: 03f26217-4c90-4753-927b-9978451220d4
OrderTotal: 0.0
CreatedDate: 06/26/2025 13:46:44
------------------------ 
2025-06-26 13:46:45.289 +00:00 [INF] Executed DbCommand (26ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderStateInstance] ([CorrelationId], [CreatedDate], [CurrentState], [CustomerId], [OrderId], [OrderTotal])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-26 13:46:45.314 +00:00 [INF] Executed DbCommand (51ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderStateInstance] ([CorrelationId], [CreatedDate], [CurrentState], [CustomerId], [OrderId], [OrderTotal])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-26 13:46:45.392 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:46:45.392 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:46:45.469 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary), @p9='?' (Size = 4000), @p10='?' (Size = 256), @p11='?' (DbType = Guid), @p12='?' (DbType = Guid), @p13='?' (Size = 256), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (Size = 256), @p17='?' (Size = 4000), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = Guid), @p22='?' (Size = 4000), @p23='?' (DbType = Guid), @p24='?' (Size = 4000), @p25='?' (DbType = Guid), @p26='?' (Size = 256), @p27='?' (DbType = DateTime2), @p28='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
INSERT INTO [OutboxMessage] ([Body], [ContentType], [ConversationId], [CorrelationId], [DestinationAddress], [EnqueueTime], [ExpirationTime], [FaultAddress], [Headers], [InboxConsumerId], [InboxMessageId], [InitiatorId], [MessageId], [MessageType], [OutboxId], [Properties], [RequestId], [ResponseAddress], [SentTime], [SourceAddress])
OUTPUT INSERTED.[SequenceNumber]
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
2025-06-26 13:46:45.522 +00:00 [INF] Executed DbCommand (52ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary), @p9='?' (Size = 4000), @p10='?' (Size = 256), @p11='?' (DbType = Guid), @p12='?' (DbType = Guid), @p13='?' (Size = 256), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (Size = 256), @p17='?' (Size = 4000), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = Guid), @p22='?' (Size = 4000), @p23='?' (DbType = Guid), @p24='?' (Size = 4000), @p25='?' (DbType = Guid), @p26='?' (Size = 256), @p27='?' (DbType = DateTime2), @p28='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
INSERT INTO [OutboxMessage] ([Body], [ContentType], [ConversationId], [CorrelationId], [DestinationAddress], [EnqueueTime], [ExpirationTime], [FaultAddress], [Headers], [InboxConsumerId], [InboxMessageId], [InitiatorId], [MessageId], [MessageType], [OutboxId], [Properties], [RequestId], [ResponseAddress], [SentTime], [SourceAddress])
OUTPUT INSERTED.[SequenceNumber]
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
2025-06-26 13:46:45.614 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:46:45.614 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:46:45.670 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:46:45.670 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:46:45.688 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:46:45.710 +00:00 [INF] Executed DbCommand (22ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:46:45.779 +00:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2025-06-26 13:46:45.802 +00:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2025-06-26 13:46:45.989 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:46:45.989 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:46:46.031 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:46:46.043 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:46:46.134 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:46:46.135 +00:00 [INF] Executed DbCommand (45ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:46:46.170 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:46:46.176 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:46:46.209 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:46:46.209 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:46:46.257 +00:00 [INF] Executed DbCommand (26ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2025-06-26 13:46:46.257 +00:00 [INF] Executed DbCommand (26ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2025-06-26 13:46:46.277 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:46:46.300 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:46:46.353 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:46:46.376 +00:00 [INF] Executed DbCommand (50ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:46:46.494 +00:00 [INF] Executed DbCommand (67ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:46:46.585 +00:00 [INF] Executed DbCommand (73ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:46:46.592 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:46:46.601 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:46:46.618 +00:00 [INF] Executed DbCommand (17ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:46:46.682 +00:00 [INF] Executed DbCommand (65ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:46:46.770 +00:00 [INF] Executed DbCommand (10ms) [Parameters=[@__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1
2025-06-26 13:46:46.804 +00:00 [INF] Executed DbCommand (20ms) [Parameters=[@__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1
2025-06-26 13:46:46.831 +00:00 [INF] Executed DbCommand (94ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:46:46.852 +00:00 [INF] Executed DbCommand (69ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:46:47.007 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:46:47.007 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:46:47.037 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int64), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = Int32), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InboxState] ([Consumed], [ConsumerId], [Delivered], [ExpirationTime], [LastSequenceNumber], [LockId], [MessageId], [ReceiveCount], [Received])
OUTPUT INSERTED.[Id], INSERTED.[RowVersion]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-06-26 13:46:47.144 +00:00 [INF] Executed DbCommand (107ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int64), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = Int32), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InboxState] ([Consumed], [ConsumerId], [Delivered], [ExpirationTime], [LastSequenceNumber], [LockId], [MessageId], [ReceiveCount], [Received])
OUTPUT INSERTED.[Id], INSERTED.[RowVersion]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-06-26 13:46:47.268 +00:00 [INF] Executed DbCommand (26ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:46:47.282 +00:00 [INF] Executed DbCommand (16ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:46:47.355 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:46:47.355 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:46:47.410 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:46:47.410 +00:00 [INF] Executed DbCommand (26ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:46:47.411 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:46:47.420 +00:00 [INF] Executed DbCommand (28ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:46:47.453 +00:00 [INF] Executed DbCommand (32ms) [Parameters=[@p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [OutboxMessage]
OUTPUT 1
WHERE [SequenceNumber] = @p0;
2025-06-26 13:46:47.520 +00:00 [INF] Executed DbCommand (65ms) [Parameters=[@p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [OutboxMessage]
OUTPUT 1
WHERE [SequenceNumber] = @p0;
2025-06-26 13:46:47.610 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[CorrelationId], [o].[CreatedDate], [o].[CurrentState], [o].[CustomerId], [o].[OrderId], [o].[OrderTotal]
FROM [OrderStateInstance] AS [o]
WHERE [o].[CorrelationId] = @__id
2025-06-26 13:46:47.631 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[CorrelationId], [o].[CreatedDate], [o].[CurrentState], [o].[CustomerId], [o].[OrderId], [o].[OrderTotal]
FROM [OrderStateInstance] AS [o]
WHERE [o].[CorrelationId] = @__id
2025-06-26 13:46:47.677 +00:00 [INF] StockReservedEvent received in OrderStateMachine: CorrelationId: 139ef363-72c5-470b-a37d-41d5ad90e35c
CurrentState: StockCheck
OrderId: b06a50fa-56c5-42a4-9fa7-0db0915101c8
CustomerId: 03f26217-4c90-4753-927b-9978451220d4
OrderTotal: 0.00
CreatedDate: 06/26/2025 13:46:44
------------------------ 
2025-06-26 13:46:47.677 +00:00 [INF] StockReservedEvent received in OrderStateMachine: CorrelationId: f5e01618-988d-49fb-81f4-63af34847ddb
CurrentState: StockCheck
OrderId: b06a50fa-56c5-42a4-9fa7-0db0915101c8
CustomerId: 03f26217-4c90-4753-927b-9978451220d4
OrderTotal: 0.00
CreatedDate: 06/26/2025 13:46:44
------------------------ 
2025-06-26 13:46:47.703 +00:00 [INF] CompletePaymentMessage sent in OrderStateMachine: CorrelationId: 139ef363-72c5-470b-a37d-41d5ad90e35c
CurrentState: StockReserved
OrderId: b06a50fa-56c5-42a4-9fa7-0db0915101c8
CustomerId: 03f26217-4c90-4753-927b-9978451220d4
OrderTotal: 0.00
CreatedDate: 06/26/2025 13:46:44
------------------------ 
2025-06-26 13:46:47.703 +00:00 [INF] CompletePaymentMessage sent in OrderStateMachine: CorrelationId: f5e01618-988d-49fb-81f4-63af34847ddb
CurrentState: StockReserved
OrderId: b06a50fa-56c5-42a4-9fa7-0db0915101c8
CustomerId: 03f26217-4c90-4753-927b-9978451220d4
OrderTotal: 0.00
CreatedDate: 06/26/2025 13:46:44
------------------------ 
2025-06-26 13:46:47.725 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [OrderStateInstance] SET [CurrentState] = @p0
OUTPUT 1
WHERE [CorrelationId] = @p1;
2025-06-26 13:46:47.761 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [OrderStateInstance] SET [CurrentState] = @p0
OUTPUT 1
WHERE [CorrelationId] = @p1;
2025-06-26 13:46:47.785 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:46:47.790 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:46:47.800 +00:00 [INF] Executed DbCommand (10ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary), @p9='?' (Size = 4000), @p10='?' (Size = 256), @p11='?' (DbType = Guid), @p12='?' (DbType = Guid), @p13='?' (Size = 256), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (Size = 256), @p17='?' (Size = 4000), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = Guid), @p22='?' (Size = 4000), @p23='?' (DbType = Guid), @p24='?' (Size = 4000), @p25='?' (DbType = Guid), @p26='?' (Size = 256), @p27='?' (DbType = DateTime2), @p28='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
INSERT INTO [OutboxMessage] ([Body], [ContentType], [ConversationId], [CorrelationId], [DestinationAddress], [EnqueueTime], [ExpirationTime], [FaultAddress], [Headers], [InboxConsumerId], [InboxMessageId], [InitiatorId], [MessageId], [MessageType], [OutboxId], [Properties], [RequestId], [ResponseAddress], [SentTime], [SourceAddress])
OUTPUT INSERTED.[SequenceNumber]
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
2025-06-26 13:46:47.831 +00:00 [INF] Executed DbCommand (29ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary), @p9='?' (Size = 4000), @p10='?' (Size = 256), @p11='?' (DbType = Guid), @p12='?' (DbType = Guid), @p13='?' (Size = 256), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (Size = 256), @p17='?' (Size = 4000), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = Guid), @p22='?' (Size = 4000), @p23='?' (DbType = Guid), @p24='?' (Size = 4000), @p25='?' (DbType = Guid), @p26='?' (Size = 256), @p27='?' (DbType = DateTime2), @p28='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
INSERT INTO [OutboxMessage] ([Body], [ContentType], [ConversationId], [CorrelationId], [DestinationAddress], [EnqueueTime], [ExpirationTime], [FaultAddress], [Headers], [InboxConsumerId], [InboxMessageId], [InitiatorId], [MessageId], [MessageType], [OutboxId], [Properties], [RequestId], [ResponseAddress], [SentTime], [SourceAddress])
OUTPUT INSERTED.[SequenceNumber]
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
2025-06-26 13:46:47.937 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:46:47.963 +00:00 [INF] Executed DbCommand (8ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:46:47.968 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:46:48.014 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:46:48.020 +00:00 [INF] Executed DbCommand (26ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:46:48.069 +00:00 [INF] Executed DbCommand (27ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:46:48.080 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2025-06-26 13:46:48.151 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2025-06-26 13:46:48.243 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:46:48.248 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:46:48.297 +00:00 [INF] Executed DbCommand (43ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:46:48.345 +00:00 [INF] Executed DbCommand (49ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:46:48.442 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:46:48.461 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:46:48.504 +00:00 [INF] Executed DbCommand (12ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:46:48.539 +00:00 [INF] Executed DbCommand (20ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:46:48.570 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:46:48.623 +00:00 [INF] Executed DbCommand (47ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:46:48.625 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2025-06-26 13:46:48.678 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:46:48.689 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:46:48.686 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2025-06-26 13:46:48.779 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:46:48.825 +00:00 [INF] Executed DbCommand (14ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:46:48.884 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:46:48.890 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:46:48.904 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:46:48.966 +00:00 [INF] Executed DbCommand (60ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 13:46:48.975 +00:00 [INF] Executed DbCommand (13ms) [Parameters=[@__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1
2025-06-26 13:46:49.022 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:46:49.027 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:46:49.044 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 13:46:49.083 +00:00 [INF] Executed DbCommand (41ms) [Parameters=[@p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [OutboxMessage]
OUTPUT 1
WHERE [SequenceNumber] = @p0;
2025-06-26 13:46:49.139 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[@__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1
2025-06-26 13:46:49.170 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 13:46:49.183 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [OutboxMessage]
OUTPUT 1
WHERE [SequenceNumber] = @p0;
2025-06-26 13:46:54.911 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:47:04.923 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:47:14.992 +00:00 [INF] Executed DbCommand (36ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:47:25.024 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:47:25.100 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int64), @p1='?' (Size = 8) (DbType = Binary), @p2='?' (DbType = Int64), @p3='?' (Size = 8) (DbType = Binary), @p4='?' (DbType = Int64), @p5='?' (Size = 8) (DbType = Binary), @p6='?' (DbType = Int64), @p7='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [InboxState]
OUTPUT 1
WHERE [Id] = @p0 AND [RowVersion] = @p1;
DELETE FROM [InboxState]
OUTPUT 1
WHERE [Id] = @p2 AND [RowVersion] = @p3;
DELETE FROM [InboxState]
OUTPUT 1
WHERE [Id] = @p4 AND [RowVersion] = @p5;
DELETE FROM [InboxState]
OUTPUT 1
WHERE [Id] = @p6 AND [RowVersion] = @p7;
2025-06-26 13:47:25.166 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:47:35.195 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:47:45.250 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:47:55.258 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:48:05.351 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:48:15.422 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:48:25.488 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:48:35.546 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:48:45.589 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:48:55.639 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:49:05.655 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:49:15.688 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:49:25.720 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:49:35.752 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:49:45.789 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:49:55.811 +00:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:50:05.872 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:50:15.884 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:50:25.898 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:50:35.932 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:50:45.973 +00:00 [INF] Executed DbCommand (26ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:50:56.016 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:51:06.050 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:51:16.064 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:51:26.082 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:51:36.144 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:51:46.160 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:51:56.192 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:52:06.214 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:52:16.240 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:52:26.255 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:52:36.285 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:52:46.315 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 13:52:56.343 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 15:08:45.273 +00:00 [WRN] No store type was specified for the decimal property 'OrderTotal' on entity type 'OrderStateInstance'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-06-26 15:08:47.268 +00:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-26 15:08:47.315 +00:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-26 15:08:47.327 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-26 15:08:47.339 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-26 15:08:47.382 +00:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-26 15:08:47.407 +00:00 [INF] No migrations were applied. The database is already up to date.
2025-06-26 15:08:48.334 +00:00 [INF] Configured endpoint create-order-message-queue, Saga: SagaOrchestration.StateInstances.OrderStateInstance, State Machine: SagaOrchestration.StateMachines.OrderStateMachine
2025-06-26 15:08:49.509 +00:00 [INF] Now listening on: http://[::]:8080
2025-06-26 15:08:49.516 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-26 15:08:49.525 +00:00 [INF] Hosting environment: Development
2025-06-26 15:08:49.560 +00:00 [INF] Content root path: /app
2025-06-26 15:08:49.826 +00:00 [INF] Bus started: "rabbitmq://rabbitmq/"
2025-06-26 15:08:59.927 +00:00 [INF] Executed DbCommand (85ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 15:09:10.044 +00:00 [INF] Executed DbCommand (26ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 15:09:20.109 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 15:09:30.119 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 15:09:40.149 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 15:09:50.163 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 15:10:00.201 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 15:10:10.238 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 15:10:20.267 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 15:10:30.283 +00:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 15:10:40.321 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 15:10:50.356 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 15:11:00.408 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 15:11:10.438 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 15:11:20.444 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 15:11:30.499 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 15:11:40.535 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 15:11:50.566 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 15:11:54.596 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 15:11:54.801 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 15:11:54.820 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int64), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = Int32), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InboxState] ([Consumed], [ConsumerId], [Delivered], [ExpirationTime], [LastSequenceNumber], [LockId], [MessageId], [ReceiveCount], [Received])
OUTPUT INSERTED.[Id], INSERTED.[RowVersion]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-06-26 15:11:54.891 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 15:11:54.904 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 15:11:54.915 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 15:11:55.026 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[CorrelationId], [o].[CreatedDate], [o].[CurrentState], [o].[CustomerId], [o].[OrderId], [o].[OrderTotal]
FROM [OrderStateInstance] AS [o]
WHERE [o].[OrderId] = '60d34fbd-1fe6-41cb-8e34-a4840b467a9f'
2025-06-26 15:11:55.111 +00:00 [INF] CreateOrderMessage received in OrderStateMachine: CorrelationId: 494ce92d-857a-434b-b631-763eb4dba778
CurrentState: Initial
OrderId: 00000000-0000-0000-0000-000000000000
CustomerId: 00000000-0000-0000-0000-000000000000
OrderTotal: 0
CreatedDate: 01/01/0001 00:00:00
------------------------ 
2025-06-26 15:11:58.395 +00:00 [INF] CheckBookStockCommand published in OrderStateMachine: CorrelationId: 494ce92d-857a-434b-b631-763eb4dba778
CurrentState: StockCheck
OrderId: 60d34fbd-1fe6-41cb-8e34-a4840b467a9f
CustomerId: bd995b35-edc8-486e-9f5d-460d024a97b2
OrderTotal: 0.0
CreatedDate: 06/26/2025 15:11:58
------------------------ 
2025-06-26 15:11:58.491 +00:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderStateInstance] ([CorrelationId], [CreatedDate], [CurrentState], [CustomerId], [OrderId], [OrderTotal])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-26 15:11:58.559 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 15:11:58.572 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary), @p9='?' (Size = 4000), @p10='?' (Size = 256), @p11='?' (DbType = Guid), @p12='?' (DbType = Guid), @p13='?' (Size = 256), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (Size = 256), @p17='?' (Size = 4000), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = Guid), @p22='?' (Size = 4000), @p23='?' (DbType = Guid), @p24='?' (Size = 4000), @p25='?' (DbType = Guid), @p26='?' (Size = 256), @p27='?' (DbType = DateTime2), @p28='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
INSERT INTO [OutboxMessage] ([Body], [ContentType], [ConversationId], [CorrelationId], [DestinationAddress], [EnqueueTime], [ExpirationTime], [FaultAddress], [Headers], [InboxConsumerId], [InboxMessageId], [InitiatorId], [MessageId], [MessageType], [OutboxId], [Properties], [RequestId], [ResponseAddress], [SentTime], [SourceAddress])
OUTPUT INSERTED.[SequenceNumber]
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
2025-06-26 15:11:58.648 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 15:11:58.654 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 15:11:58.664 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 15:11:58.721 +00:00 [INF] Executed DbCommand (26ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2025-06-26 15:11:58.862 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 15:11:58.878 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 15:11:58.942 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 15:11:58.948 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 15:11:58.984 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 15:11:59.039 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2025-06-26 15:11:59.048 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 15:11:59.080 +00:00 [INF] Executed DbCommand (27ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 15:11:59.121 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 15:11:59.150 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 15:11:59.205 +00:00 [INF] Executed DbCommand (27ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 15:11:59.233 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1
2025-06-26 15:11:59.256 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 15:11:59.274 +00:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [OutboxMessage]
OUTPUT 1
WHERE [SequenceNumber] = @p0;
2025-06-26 15:11:59.511 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 15:11:59.542 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 15:11:59.593 +00:00 [INF] Executed DbCommand (26ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int64), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = Int32), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InboxState] ([Consumed], [ConsumerId], [Delivered], [ExpirationTime], [LastSequenceNumber], [LockId], [MessageId], [ReceiveCount], [Received])
OUTPUT INSERTED.[Id], INSERTED.[RowVersion]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-06-26 15:11:59.635 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 15:11:59.641 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 15:11:59.650 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 15:11:59.698 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [o].[CorrelationId], [o].[CreatedDate], [o].[CurrentState], [o].[CustomerId], [o].[OrderId], [o].[OrderTotal]
FROM [OrderStateInstance] AS [o]
WHERE [o].[CorrelationId] = @__id
2025-06-26 15:11:59.721 +00:00 [INF] StockReservedEvent received in OrderStateMachine: CorrelationId: 494ce92d-857a-434b-b631-763eb4dba778
CurrentState: StockCheck
OrderId: 60d34fbd-1fe6-41cb-8e34-a4840b467a9f
CustomerId: bd995b35-edc8-486e-9f5d-460d024a97b2
OrderTotal: 0.00
CreatedDate: 06/26/2025 15:11:58
------------------------ 
2025-06-26 15:11:59.748 +00:00 [INF] CompletePaymentMessage sent in OrderStateMachine: CorrelationId: 494ce92d-857a-434b-b631-763eb4dba778
CurrentState: StockReserved
OrderId: 60d34fbd-1fe6-41cb-8e34-a4840b467a9f
CustomerId: bd995b35-edc8-486e-9f5d-460d024a97b2
OrderTotal: 0.00
CreatedDate: 06/26/2025 15:11:58
------------------------ 
2025-06-26 15:11:59.792 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [OrderStateInstance] SET [CurrentState] = @p0
OUTPUT 1
WHERE [CorrelationId] = @p1;
2025-06-26 15:11:59.804 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 15:11:59.857 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary), @p9='?' (Size = 4000), @p10='?' (Size = 256), @p11='?' (DbType = Guid), @p12='?' (DbType = Guid), @p13='?' (Size = 256), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (Size = 256), @p17='?' (Size = 4000), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = Guid), @p22='?' (Size = 4000), @p23='?' (DbType = Guid), @p24='?' (Size = 4000), @p25='?' (DbType = Guid), @p26='?' (Size = 256), @p27='?' (DbType = DateTime2), @p28='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
INSERT INTO [OutboxMessage] ([Body], [ContentType], [ConversationId], [CorrelationId], [DestinationAddress], [EnqueueTime], [ExpirationTime], [FaultAddress], [Headers], [InboxConsumerId], [InboxMessageId], [InitiatorId], [MessageId], [MessageType], [OutboxId], [Properties], [RequestId], [ResponseAddress], [SentTime], [SourceAddress])
OUTPUT INSERTED.[SequenceNumber]
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
2025-06-26 15:11:59.900 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 15:11:59.905 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 15:11:59.969 +00:00 [INF] Executed DbCommand (10ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 15:11:59.982 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2025-06-26 15:12:00.056 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 15:12:00.108 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 15:12:00.157 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 15:12:00.168 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 15:12:00.181 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 15:12:00.220 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_3='?' (DbType = Int32), @__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid), @__lastSequenceNumber_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_3) [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1 AND [o].[SequenceNumber] > @__lastSequenceNumber_2
ORDER BY [o].[SequenceNumber]
2025-06-26 15:12:00.236 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 15:12:00.271 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 15:12:00.317 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (DbType = Guid), p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Consumed], [m].[ConsumerId], [m].[Delivered], [m].[ExpirationTime], [m].[LastSequenceNumber], [m].[LockId], [m].[MessageId], [m].[ReceiveCount], [m].[Received], [m].[RowVersion]
FROM (
    SELECT * FROM InboxState WITH (UPDLOCK, ROWLOCK) WHERE MessageId = @p0 AND ConsumerId = @p1
) AS [m]
2025-06-26 15:12:00.323 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 15:12:00.335 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int64), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p8='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InboxState] SET [Consumed] = @p0, [Delivered] = @p1, [ExpirationTime] = @p2, [LastSequenceNumber] = @p3, [LockId] = @p4, [ReceiveCount] = @p5, [Received] = @p6
OUTPUT INSERTED.[RowVersion]
WHERE [Id] = @p7 AND [RowVersion] = @p8;
2025-06-26 15:12:00.369 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[@__MessageId_0='?' (DbType = Guid), @__ConsumerId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[SequenceNumber], [o].[Body], [o].[ContentType], [o].[ConversationId], [o].[CorrelationId], [o].[DestinationAddress], [o].[EnqueueTime], [o].[ExpirationTime], [o].[FaultAddress], [o].[Headers], [o].[InboxConsumerId], [o].[InboxMessageId], [o].[InitiatorId], [o].[MessageId], [o].[MessageType], [o].[OutboxId], [o].[Properties], [o].[RequestId], [o].[ResponseAddress], [o].[SentTime], [o].[SourceAddress]
FROM [OutboxMessage] AS [o]
WHERE [o].[InboxMessageId] = @__MessageId_0 AND [o].[InboxConsumerId] = @__ConsumerId_1
2025-06-26 15:12:00.379 +00:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-06-26 15:12:00.418 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [OutboxMessage]
OUTPUT 1
WHERE [SequenceNumber] = @p0;
2025-06-26 15:12:00.622 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 15:12:10.656 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 15:12:20.663 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 15:12:30.680 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 15:12:30.766 +00:00 [INF] Executed DbCommand (21ms) [Parameters=[@p0='?' (DbType = Int64), @p1='?' (Size = 8) (DbType = Binary), @p2='?' (DbType = Int64), @p3='?' (Size = 8) (DbType = Binary)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [InboxState]
OUTPUT 1
WHERE [Id] = @p0 AND [RowVersion] = @p1;
DELETE FROM [InboxState]
OUTPUT 1
WHERE [Id] = @p2 AND [RowVersion] = @p3;
2025-06-26 15:12:30.812 +00:00 [INF] Executed DbCommand (26ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 15:12:40.828 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 15:12:50.852 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 15:13:00.866 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
2025-06-26 15:13:10.879 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__removeTimestamp_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i].[Id], [i].[Consumed], [i].[ConsumerId], [i].[Delivered], [i].[ExpirationTime], [i].[LastSequenceNumber], [i].[LockId], [i].[MessageId], [i].[ReceiveCount], [i].[Received], [i].[RowVersion]
FROM [InboxState] AS [i]
WHERE [i].[Delivered] IS NOT NULL AND [i].[Delivered] < @__removeTimestamp_0
ORDER BY [i].[Delivered]
